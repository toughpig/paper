<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>笔杆检测报告单（全文标明引文）</title>
	<meta name="keywords" content="" />
	<meta name="description" content="" />
	<link href="css/report.css?v20180524" type="text/css" rel="stylesheet" />
	<script src="js/jquery.tools.pack.js" type="text/javascript"></script>
	<script type="text/javascript">
    function $ShowMore(n) {
        if ($("#simMore_" + n + " a").text() == '收起相似文献') {//收起
            $("#reportTable_" + n + " .trLike").hide();
            for (var i = 0; i < 5; i++) {
                $("#reportTable_" + n + " .trLike:eq("+i+")").show();
            }
            $("#simMore_" + n + " a").html('查看更多相似文献<span class="icons inlineBlock simDown"></span>');
        } else {
            $("#reportTable_" + n + " .trLike").show();
            $("#simMore_" + n + " a").html('收起相似文献<span class="icons inlineBlock simUp"></span>');
        }
}</script>
<style>
    em.similar{color:Red; font-style:normal;}
</style>
</head>
<body>
<div class="report_bg2">
  <div class="report_bg3">
    <div class="report_top">
      
      <h1>笔杆检测报告单<span>（全文标明引文）</span></h1>
    </div>
    <div class="report_Wrap">
      <div class="report_tab" id="report_tab">
       <ul>
                                            <li class="rep_curr"><div><a href="全文标明引文" class="green">全文标明引文</a></div></li>
                                            <li><div><a href="全文对照.html" class="green">全文对照</a></div></li>
        </ul>
        <div class="report_priSav">
          <a href="javascript:window.print();" class="print inlineBlock"><span class="icons inlineBlock"></span>打印</a>
          <a target="_blank" href="https://www.bigan.net/report/explain.html" class="report_explain inlineBlock"><span class="icons inlineBlock"></span>检测说明</a>
        </div>
      </div>
      <div class="report_content">
        <div class="report_main">
          <a id="toTop" title="回到顶部"></a><!-- 回到顶部 -->
          <script>
              $(document).ready(function () {
                  $("#toTop").hide();
                  //检测屏幕高度
                  var height = $(window).height();
                  //scroll() 方法为滚动事件
                  $(window).scroll(function () {
                      if ($(window).scrollTop() > height) {
                          $("#toTop").fadeIn(500);
                      } else {
                          $("#toTop").fadeOut(500);
                      }
                  });
                  $("#toTop").click(function () {
                      $('body,html').animate({ scrollTop: 0 }, 100);
                      return false;
                  });
              });
          </script>
           <div class="report_Mtop"></div>
          <div class="report_Mbot">
            <div class="report_result">
              <div class="report_info">
                <p><span>标题：</span>main.pdf</p>
                <p><span>作者：</span></p>
                <p><span>报告编号：</span>BG202203062339490029</p>
                <p><span>提交时间：</span>2022-03-06 23:40:09</p>
              </div>
              <div class="report_ratio">
                <ul>
                  <li style="display:none;"><span class="icons ratioIcon ratio1"></span>总复制比：<span class="green">21.4%</span></li>
                  <li class="inlineBlock"><span class="icons ratioIcon ratio2"></span>去除引用文献复制比：<span class="green">15.7%</span></li>
                  <li class="inlineBlock"><span class="icons ratioIcon ratio3"></span>去除本人已发表文献复制比：<span class="green">21.4%</span></li>
                  <li class="inlineBlock"><span class="icons ratioIcon ratio4"></span>单篇最大文字复制比：<span class="green">3.7%</span></li>
                </ul>
              </div>
               <div class="clear"></div>
              <div class="seal">
                <div class="SealArea">
                  <div class="SealBg"><img src="data:image/png;base64,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" /></div>
                  <div class="SealPercent"></div>
                </div>
              </div>
            </div>
            <div class="repeat_words">
              <div class="repWords_box1">
                <div class="repWords_row">
                  <div class="test_range"><a href="https://www.bigan.net/qa/?key=%E6%A3%80%E6%B5%8B%E8%8C%83%E5%9B%B4" target="_blank" class="green"><span class="icons inlineBlock"></span>检测范围</a></div>
                  <span>重复字数:<b class="red">8,091</b></span><span>总字数：<b>37,817</b></span> </div>
                <div class="clear"></div>
              </div>
              </div>
              <div class="clear"></div>
              <div class="similarLiter">

                <h2 style="width:100%;text-align:center;margin-top:15px;">中英文摘要等</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>作者姓名:王昊</p><p>RISC-V指令集模拟器的设计与实现</p><p>专业硕士学位论文</p><p>(专业学位类型)</p><p>专业领域:软件工程</p><p>校内导师:汪增福教授</p><p>企业导师:侯锐研究员</p><p>完成时间:二〇二二年三月六日</p><p>Author: Wang Hao</p><p>Design and implementation of</p><p>University of Science and Technology of China <br />A dissertation for master’s degree</p><p>(Professional degree type)</p><p>RISC-V instruction set simulator</p><p>Speciality: Software Engineering</p><p>Supervisor: Prof. Wang Zengfu</p><p>Advisor: Prof. Hou Rui</p><p>Finished time: March 6,2022</p><p>中国科学技术大学学位论文授权使用声明</p><p>中国科学技术大学学位论文原创性声明</p><p><em class='similar'>本人声明所呈交的学位论文,</em><em class='similar'>是本人在导师指导下进行研究工作所取得的成果。</em><em class='similar'>除已特别加以标注和致谢的地方外,</em><em class='similar'>论文中不包含任何他人已经发表或撰写过的研究成果。</em><em class='similar'>与我一同工作的同志对本研究所做的贡献均已在论文中作了明确的说明。</em></p><p>作者签名:签字日期:</p><p><em class='similar'>作为申请学位的条件之一,</em><em class='similar'>学位论文著作权拥有者授权中国科学技术大学拥有学位论文的部分使用权,</em>即:<em class='similar'>学校有权按有关规定向国家有关部门或机构送交论文的复印件和电子版,</em><em class='similar'>允许论文被查阅和借阅,</em><em class='similar'>可以将学位论文编入《中国学位论文全文数据库》等有关数据库进行检索,</em><em class='similar'>可以采用影印、</em><em class='similar'>缩印或扫描等复制手段保存、</em><em class='similar'>汇编学位论文。</em><em class='similar'>本人提交的电子文档的内容和纸质论文的内容相一致。</em></p><p><em class='similar'>控阅的学位论文在解密后也遵守此规定。</em></p><p>□✓公开□控阅(年)</p><p>作者签名:导师签名:</p><p>签字日期:签字日期:</p><p>摘要</p><p><em class='similar'>众所周知,</em><em class='similar'>芯片产业是投入极高、</em><em class='similar'>回报极慢的领域,</em><em class='similar'>而 RISC-V提供了免费开源、</em><em class='similar'>开发周期较短的解决方案。</em><em class='similar'>面对国外芯片的生态和专利壁垒,</em><em class='similar'>RISC-V有望成为我国自主研制处理器芯片的极好的选择。</em><em class='similar'>而在集成度越来越高的今天,</em><em class='similar'>面对数千万乃至上亿晶体管的规模,</em><em class='similar'>那种&quot;设计硬件原型-实现-评估-改进-再实现&quot;的模式已经无法满足现代设计应用的需求,</em>尤其在芯片后期验证的流程中,对于基础系统软件尤其是操作系统,底层驱动等的适配和验证往往是反馈硬件设计缺陷最频繁的部分,如果不能够提供体系结构模拟器进行辅助验证,并提前进行并行的系统软件开发工作,将极大的延长芯片开发周期.</p><p>本文通过在实际 RISC-V 芯片开发过程中总结的经验,设计并实现了一款RISC-V指令集模拟器,能够完成对实际硬件的功能模拟,包括处理器核模拟,平台级中断控制器 PLIC模拟等,并且提供了 UI调试窗口,可以直接对 RISC-V架构目标程序进行调试.主要功能是脱离硬件平台进行系统软件的移植开发工作,能够极大的缩短芯片开发后期的软件移植开发工作,另外也能够辅助进行处理器验证.</p><p>本模拟器已在实际的芯片开发过程中承担了系统软件的前期移植工作,在流片之前完成了 linux内核的适配移植,并辅助进行了部分外设的驱动程序开发工作.</p><p>关键词:RISC-V;模拟器;PLIC;调试</p><p>ABSTRACT</p><p>Aswe all know, the chip industry is an area with extremely high investment and ex-tremely slow returns, and RISC-V provides a solution that is free and open source, witha short development cycle. In the face of the ecological and patent barriers of foreignchips, RISC-V is expected to become an excellent choice for China’s independent de-velopment of processor chips. And in today’s increasingly integrated degree, in the faceof tens of millions or even hundreds of millions of transistors scale, that kind of &quot;designhardware prototype - implementation - evaluati<em class='similar'>on - improvement - re-implementation&quot;model has been unable to meet the needs of modern design applications,</em> especially inthe process of chip verification, for the basic system software, especially the operatingsystem, the underlying driver and other adaptation and verification is often the mostfrequent part of the feedback hardware design defects, if you can not provide an archi-tecture simulator for auxiliary verification, And parallel system software developmentwork in advance will greatly extend the chip development cycle.</p><p>This paper designs and implements a RISC-V instruction set simulator based onthe experience summarized in the actual RISC-V chip development process, which cancomplete the functional simulation of the actual hardware, including processor coresimulation, platform-level interrupt controller PLIC simulation, etc. and provides a UIdebugging window that can directly debug the TARGET program of the RISC-V ar-</p><p>chitecture. The main function is to carry out the porting and development of system</p><p>software without the hardware platform, which can greatly shorten the software port-ing and development work in the later stage of chip development, and also assist inprocessor verification.</p><p>This simulator has undertaken the pre-migration of the system software in the ac-tual chip development process, completed the adaptation and porting of the Linux kernelbefore the tape-out, and assisted in the driver development of some peripherals.</p><p>Key Words: RISC-V; Simulator; PLIC; Debug</p><p class='uncheck'>目 录</p><p class='uncheck'>第 1章 绪论 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 1</p><p class='uncheck'>1.1 系统开发背景 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 1</p><p class='uncheck'>1.2 国内外发展现状 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 1</p><p class='uncheck'>1.3 本文主要工作 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 3</p><p class='uncheck'>1.4 论文的组织结构 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 4</p><p class='uncheck'>第 2章 相关技术分析ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 5</p><p class='uncheck'>2.1 指令集架构概述 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 5</p><p class='uncheck'>2.2 RISC-V架构 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 6</p><p class='uncheck'>2.3 体系结构模拟器 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 8</p><p class='uncheck'>2.3.1 解释型指令集模拟 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 10</p><p class='uncheck'>2.3.2 编译型指令集模拟 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 11</p><p class='uncheck'>2.4 本章小结 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 12</p><p class='uncheck'>第 3章 系统需求分析ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 13</p><p class='uncheck'>3.1 需求导出 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 13</p><p class='uncheck'>3.2 分析建模 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 13</p><p class='uncheck'>3.3 非功能性需求 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 15</p><p class='uncheck'>3.4 本章小结 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 16</p><p class='uncheck'>第 4章 系统概要设计ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 17</p><p class='uncheck'>4.1 系统概述 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 17</p><p class='uncheck'>4.2 系统静态结构 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 17</p><p class='uncheck'>4.3 系统动态结构 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 18</p><p class='uncheck'>4.3.1 解码器与指令集功能函数 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 18</p><p class='uncheck'>4.3.2 指令流程控制 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 18</p><p class='uncheck'>4.3.3 中断控制器 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 20</p><p class='uncheck'>4.3.4 交互调试模块 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 21</p><p class='uncheck'>4.3.5 本章小结 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 21</p><p class='uncheck'>第 5章 系统详细设计与实现 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 23</p><p class='uncheck'>5.1 指令集模块的实现 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 23</p><p class='uncheck'>5.2 CPU和总线的实现 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 25</p><p class='uncheck'>5.2.1 寄存器模拟 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 25</p><p class='uncheck'>5.2.2 MMU和缓存模拟 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 26</p><p class='uncheck'>5.2.3 总线和 I/O模拟 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 28</p><p class='uncheck'>5.3 中断系统的实现 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 30</p><p class='uncheck'>5.3.1 PLIC模拟 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 32</p><p class='uncheck'>5.3.2 RTC模拟 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 34</p><p class='uncheck'>5.4 调试模块和 UI实现 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 35</p><p class='uncheck'>5.5 本章小结 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 36</p><p class='uncheck'>第 6章 系统测试ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 38</p><p class='uncheck'>6.1 测试概要 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 38</p><p class='uncheck'>6.1.1 测试环境 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 38</p><p class='uncheck'>6.1.2 概述 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 38</p><p class='uncheck'>6.2 测试分析 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 38</p><p class='uncheck'>6.2.1 模块测试需求获取 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 39</p><p class='uncheck'>6.2.2 配置项测试需求获取 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 39</p><p class='uncheck'>6.2.3 系统测试需求获取 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 39</p><p class='uncheck'>6.3 测试用例设计 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 39</p><p class='uncheck'>6.3.1 模块测试用例设计 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 40</p><p class='uncheck'>6.3.2 配置项测试用例设计 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 41</p><p class='uncheck'>6.3.3 系统测试用例设计 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 42</p><p class='uncheck'>6.4 测试结果及分析 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 42</p><p class='uncheck'>6.5 测试结论 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 43</p><p class='uncheck'>第 7章 结论与展望 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 44</p><p class='uncheck'>参考文献 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 45</p><p class='uncheck'>致谢 ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ ꞏ 47</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 1章 绪 论</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>1.1系统开发背景</p><p>进入21世纪以后,各国都在积极发展信息安全技术,同时由于知识经济以及人工智能、全球互联时代的到来,集成电路产业在国民经济中发挥着越来越不可替代的作用。我国的集成电路产业经过了几十年的发展,在某些应用领域也取得了不错的成绩,但在高性能处理器以及芯片设计的关键技术中,仍然面临着巨大的挑战。此外,我国的集成电路产业发展还承担着许多来自国际的压力[1-2]。</p><p>不管是2018年中美贸易战中&quot;中兴事件&quot;和&quot;华为事件&quot;的发生,还是其他大国对我国实行的禁运政策,都让我国在市场竞争竞争中处于下风。</p><p>作为软硬件之间至关重要的接口,指令集架构(Instruction Set Architecture,</p><p>ISA)<em class='similar'>是处理器的灵魂。</em><em class='similar'>作为一款完全开源的指令集架构,</em>RISC-V在众多指令集架构中脱颖而出,不仅是因为其后发优势,提出模块化设计的概念,而且因为它开放,包容,提供了高度灵活的配置空间,在积极拥抱开源软件的今天,RISC-V已经成为未来的主流架构,而随着 RISC-V开源社区的日益壮大,更多的芯片设计厂商选择 RISC-V作为其指令集架构,指导芯片的设计生产.<em class='similar'>在集成度越来越高的今天,</em><em class='similar'>面对数千万乃至上亿晶体管的规模,</em><em class='similar'>那种&quot;设计硬件原型-实现-评估-改</em></p><p><em class='similar'>进-再实现&quot;的模式已经无法满足现代设计应用的需求</em>[3].<em class='similar'>研究表明,</em><em class='similar'>如果在 CPU的方案论证和设计阶段,</em><em class='similar'>没有及时发现问题与瓶颈,</em><em class='similar'>将会使后续的工作变得更为困难且代价更加高昂。</em><em class='similar'>因此,</em><em class='similar'>在开发一个新的体系结构处理器时,</em><em class='similar'>为了确保处理器功能特性和性能参数达到设计的预期目标,</em><em class='similar'>对体系结构进行验证是一个必不可少的步骤</em>[4].除此之外,在芯片开发后期,软硬件适配工作作为测试的重点,往往也需要模拟器环境的支持,厂商可以根据自身产品特性,设计相应的模拟器,并在此基础之上进行软件移植工作和前期软硬件设配工作,以此来提高芯片验证与测试工作的效率。当前 RISC-V的软件生态尚不完善,各种软件的 RISC-V移植工作正在开源社区如火如荼地进行中,对于芯片设计和开发厂商,更加需要积极地参与进来,<em class='similar'>RISC-V架构的体系结构模拟器将在此类工作中扮演重要的角色.</em></p><p>1.2国内外发展现状</p><p><em class='reference'>龙芯中科技术有限公司在使用模拟器辅助处理器设计的文献中提到[5-6],在</em></p><p><em class='reference'>龙芯2号处理器研发的早期,开发了模拟器 ICT-Godson,由于该模拟器对硬件模拟过于详细,导致其速度和灵活性不足.因此,龙芯基于开源模拟器 Simple-Scalar [7]重新设计实现了 Sim-Godson模拟器[5].和 ICT-Godson模拟器相比,</em>Sim-</p><p>图1.1 IBM模拟器框架</p><p><em class='reference'>Godson运行速度更快、灵活性更高,并且支持大程序评估[5].Sim-Godson可以支持时序模拟和功能模拟,可以直接加载二进制可执行程序进行模拟,该模拟器主要用于处理器核的微结构性能探索.虽然借用了 Simple-Scalar的基础模块,但 Sim-Godson对其进行了大量修改定制,</em><em class='reference'>使其能够高精准地对龙芯2号处理器核微结构进行模拟.基于 Simple-Scalar中自带的指令集仿真器和 I/O仿真器进行执行加速,其速度可以达到0.5MIPS(million instructions per second).经过详细校准,</em><em class='reference'>Sim-Godson模拟器与 ICT-Godson的误差平均不到5%[5].类似地,基于Simple-Scalar进行二次开发的模拟器还有 Sim-alpha [8].</em></p><p><em class='reference'>IBM于2012年某研讨会中做了题为&quot;IBM使用模拟器的经验&quot;的报告[9],对于 IBM如何在处理器设计过程中使用模拟器进行了介绍.在处理器前期地设</em></p><p><em class='reference'>计规划时期,IBM 使用 Mambo [10]模拟器的时钟精确模式进行微结构探索和粗</em></p><p><em class='reference'>粒度微结构定义.Mambo模拟器对微结构主要模块和结构进行了模拟,该阶段Mambo由踪迹(trace)驱动,主要运行和研究用户态应用,</em>对处理器的产品竞争</p><p><em class='reference'>力进行横向比较研究[9].在微结构设计实现期间,IBM使用基于公司内部专用</em></p><p><em class='reference'>&quot;T&quot;语言编写的时钟精准模拟器M1进行详细模拟处理器微结构[9],如图1.1所</em></p><p><em class='reference'>示.M1是以Mambo模拟器或者硬件上抓取的踪迹作为输入,并且可以收集非常<br />详细的微结构数据进行性能评估.</em></p><p><em class='reference'>为了加速M1模拟器的执行速度,需要对所抓取的踪迹进行取样,同时为了方便调试,M1支持微结构性能数据可视化功能.在处理器验证阶段,</em><em class='reference'>IBM使用Mambo作为处理器验证参考模型辅助进行验证,此阶段Mambo可以为处理器功能正确性提供参考结果.Mambo模拟了所有处理器的功能特征,</em><em class='reference'>把某些性能相关的微结构维护操作(例如 cache维护类指令)翻译成空(nop)操作,对于计算类指令产生准确的结果,并精准追踪处理器寄存器的状态变化,同时支持指令撤销操作,</em><em class='reference'>为处理器验证提供参考.IBM基于Mambo模拟器曾发现 PowerPC CPU的一个控制寄存器存在竞争条件,使得该设计错误在流片之前就被发现并修改.在该阶段,</em><em class='reference'>IBM还使用自研的由多个 FPGA(field programmable gate array)组成的VHDL(very-high-speed integrated circuithardware description language)仿真加速器Twinstar [11]进行处理器综合验证.Twinstar是时钟精准的仿真加速器,其推进方式是事件驱动模式,</em><em class='reference'>可以对整个处理器芯片进行仿真,以二进制程序作为输入,还支持详细的指令踪迹和处理器状态的实时追踪.该平台运行速度可以达到4MHz</em></p><p><em class='reference'>并可以运行未经修改的系统软件.类似 Twinstar的验证平台还有帕拉丁[12]等.在系统软件开发方面,IBM基于Mambo(加速模式),Simics [13],BGLsim [14]等多种平台,</em><em class='reference'>在流片之前就开始进行固件、操作系统、虚拟机管理器等软件的早期开发.IBM 基于 Mambo模拟器曾开发了 K42操作系统,在芯片可用之后1周内</em></p><p><em class='reference'>就启动了操作系统[10].IBM基于 BGLsim-multi [14]平台和基于 OMNeT++[?</em>]开</p><p><em class='reference'>发的 MARS(message passing interface application replay simulation)模拟平台还可以对机群网络相关的功能进行模拟,模拟器由可执行程序或者踪迹驱动,其中</em></p><p><em class='reference'>MARS平台还可以对MPI(message passing interface)类应用进行调优.</em></p><p><em class='similar'>此外,</em><em class='similar'>比较著名的研究项目还有法国的嵌入式多体系结构模拟器 Qemu </em>[15]、<em class='similar'>上海同济大学研制的 PEMU </em>[16]<em class='similar'>以及浙江大学开发的WuKong系统</em>[17]等。</p><p>1.3本文主要工作</p><p>为了加快芯片开发项目中的系统软件开发过程,以及辅助进行处理器验证,本文从真实的芯片开发项目工作流程入手,设计并实现了一款针对 RISC-V体系结构的指令集功能模拟器,可以使得芯片开发团队脱离硬件平台进行并发的系统软件移植/开发/测试工作,提供对真实硬件的功能模拟,以及丰富的调试手段,缩<br />短软件开发周期,辅助处理器验证工作.主要完成的工作如下:</p><p>(1)参照 RISC-V 用户手册,特权级架构手册,以及实际的硬件设计方案,对RISC-V标准拓展指令集共196条汇编指令进行 C++功能函数模拟,其中大部分指令功能可以直接由 RISC-V 指令集手册获取,少部分指令(主要是特权架构指令)参照硬件设计团队具体的 chisel代码进行翻译,对硬件设计的功能框架进行建模,确定模拟器的实现方案,规划具体功能模块的边界.</p><p>(2)实现 RISC-V指令集模拟器前后端模块,添加丰富的调试手段,设计并实现平台级中断控制器 PLIC和部分外设模拟,可以直接在模拟器进行外设驱动的开发,结合实际项目需求,添加 UI 可视化界面,进一步加强模拟器的易用性.在实际的芯片开发项目中帮助团队进行系统软件开发工作,并对处理器进行辅助验证.</p><p>本人负责的主要工作有进行指令集模块的功能函数设计实现,模拟器后端整体框架的搭建,平台级中断控制器的功能建模与实现,调试交互模块的可视化界面优化,以及测试模拟器是否符合设计需要.</p><p>1.4论文的组织结构</p><p><em class='similar'>本论文总共分为7章,</em><em class='similar'>各章节内容安排如下:</em></p><p>第一章:绪论。本章首先简要介绍了 RISC-V指令集架构和体系结构模拟器的背景,然后对国内外主要体系结构模拟器进行举例分析,进而确定了本模拟器的设计思路,<em class='similar'>最后阐述了本文的主要工作以及论文的组织结构。</em><em class='similar'>第二章:</em><em class='similar'>相关技术分析。</em>本章对体系结构模拟器的各种技术知识进行分析,包括体系结构各类别和作用,以及指令集模拟策略等相关技术,然后针对 RISC-V指令集架构特性,确定了基于解释型的模拟策略作为本模拟器的设计方案.第三章:系统需求分析。本章主要是采用面向对象分析的方法对模拟器用户的需求进行分析与建模,<em class='similar'>明确模拟器的功能需求和性能需求,</em><em class='similar'>建立系统需求规格说明书。</em><em class='similar'>第四章:</em><em class='similar'>系统概要设计。</em>本章主要是对 RISC-V指令集模拟器的总体框架进行设计与描述,包括系统的静态软件结构、动态运行流程,确立了模拟器的四个功能模块:指令集模块,CPU和总线模块,中断模块以及调试交互模块。第五章:系统详细设计与实现。本章主要是对 RISC-V指令集模拟器的各个功能模块的具体实现进行阐述,确定每个模块的功能边界、<em class='similar'>数据结构和接口细节,</em><em class='similar'>并进行具体实现。</em><em class='similar'>第六章:</em><em class='similar'>系统测试与结果分析。</em>本章主要是对 RISC-V指令集模拟器进行单元测试、<em class='similar'>配置项测试和系统测试,</em><em class='similar'>包括测试需求分析和测试用例设计的过程,</em>并依据测试结果,分析模拟器功能和性能的实现情况。第七章:结论与期望。本章对全文工作进行总结,简要地回顾了 RISC-V指令集模拟器的开发背景,介绍了系统的具体设计与实现情况,并指出了当前系统所存在的问题以及未来可能进行改进的方向。</p><p>第2章相关技术分析</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 2章 相关技术分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>由于本系统是基于 RISC-V指令集的体系结构模拟器,目标是模拟处理器执行 RISC-V汇编指令前后的软硬件行为,故本章介绍 RISC-V指令集架构相关的内容以及体系结构模拟器的相关技术.</p><p>2.1指令集架构概述</p><p><em class='similar'>指令集架构</em><em class='similar'>(Instruction Set Architecture,</em><em class='similar'> ISA)</em><em class='similar'>是计算机体系结构中定义的</em></p><p>软硬件接口规范,是信息技术生态的原始起点[18]。<em class='similar'>指令集架构的内容包含了基本数据类型,</em><em class='similar'>指令集,</em><em class='similar'>寄存器,</em><em class='similar'>寻址模式,</em><em class='similar'>存储体系,</em><em class='similar'>中断,</em><em class='similar'>异常处理以及外部I/O </em>[19]。<em class='similar'>微架构是指处理器的具体硬件实现方法。</em><em class='similar'>同一种指令集架构,</em><em class='similar'>可以通过实现不同的微架构来设计出性能各异的处理器,</em><em class='similar'>其制造成本、</em>功耗、<em class='similar'>性能可能会有差异,</em><em class='similar'>但是软件可以不经过修改直接运行在同种指令集架构的不同处理器上。</em><em class='similar'>指令集架构不仅仅是指令的集合,</em><em class='similar'>它还定义了处理器的一些硬件信息,</em><em class='similar'>比如寻址模式、</em><em class='similar'>寄存器设置、</em><em class='similar'>存储器、</em><em class='similar'>数据类型等等一些需要让程序员了解的硬件信息,</em><em class='similar'>以方便程序员进行软件开发。</em><em class='similar'>指令集架构主要分为复杂指令集</em>(ComplexInstruction Set Computer, CSIC)和精简指令集(Reduced Instruction Set Computer,</p><p>RSIC),前者使用不定长的指令设计方案,包含了许多处理器不常使用的复杂指令,使得 CPU设计变得异常复杂,<em class='similar'>大大增加了硬件设计的时间成本和面积开销;</em>而后者采用定长的指令设计方案,只保留处理器常用指令,因此指令结构较为精简,相应的硬件设计也会比较简洁。<em class='similar'>随着信息技术的发展,</em><em class='similar'>在这几十年间,</em><em class='similar'>世界上诞生了许多指令集架构,</em><em class='similar'>也消亡了很多指令集架构,</em><em class='similar'>现在保留的比较比较知名的有 x86指令集架构和 ARM指令集架构。</em><em class='similar'>下面就简单介绍下这两款指令集架构。</em></p><p>x86是由英特尔公司推出的一种复杂指令集架构,采用可变指令长度的设计,<em class='similar'>经过数代的发展</em>,<em class='similar'>相继由最初的16位架构发展成如今的64位架构。</em>在 x86诞生初期,<em class='similar'>CSIC还是业界主流,</em>虽然在之后 RSIC已经取代 CSIC成为主流,但是由于英特尔公司的巨大成功以及为了软件兼容性做出的妥协,x86架构被一直保留了下来。为了克服 CSIC的部分缺点,<em class='similar'>英特尔也做出了很多优化。</em><em class='similar'>例如,</em><em class='similar'>Intel采用&quot;微码化&quot;先把复杂的 CISC指令用硬件解码器翻译,</em><em class='similar'>变成简单的指令序列,</em><em class='similar'>然后再运行,</em><em class='similar'>采用流水线的方法,</em><em class='similar'>使得即使是 CISC架构的 x86也可以借鉴 RISC架构的优点。</em><em class='similar'>但是这样也带来了额外的硬件开销,</em><em class='similar'>影响其性能,</em><em class='similar'>这是作为 CISC架构的 x86不得不付出的代价。</em></p><p>ARM(<em class='similar'>Advanced RISC Machines)</em><em class='similar'>是一家诞生于英国的处理器设计与软件公</em></p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 2章 相关技术分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>司,<em class='similar'>其主要业务是设计 ARM架构的处理器,</em><em class='similar'>以及向其他 CPU设计制造商提供知识产权</em><em class='similar'>(IP),</em><em class='similar'>并通过收取专利许可费来获取利润。</em>ARM采用 RISC架构,<em class='similar'>支持Thumb</em><em class='similar'>(16位)</em><em class='similar'>/ARM(32位)</em><em class='similar'>双指令集,</em><em class='similar'>能很好地兼容8位/16位器件</em><em class='similar'>(Thumb是 ARM体系结构中一种16位的指令集)</em>。<em class='similar'>指令执行采用3级流水线/5级流水线技术。</em><em class='similar'>寻址方式灵活简单,</em><em class='similar'>执行效率高。</em><em class='similar'>指令长度固定</em><em class='similar'>(在 ARM状态下是32位,</em><em class='similar'>在 Thumb状态下是16位)</em>。<em class='similar'>如今,</em><em class='similar'>ARM处理器占领了32位嵌入式处理器的大部分市场,</em><em class='similar'>并且是世界上使用最广泛的32位处理器体系结构。</em><em class='similar'>来自世界各地的数十家著名的半导体公司都在使用 ARM的授权。</em><em class='similar'>然后通过自己的外围电路设计,</em><em class='similar'>开发的 ARM处理器可用于许多领域。</em></p><p>2.2 RISC-V架构</p><p><em class='similar'>第五代精简指令集</em><em class='similar'>(RISC-V,</em><em class='similar'> Reduced Instruction Set Computer - Five)</em><em class='similar'>是由加州大学伯克利分校的 David.</em><em class='similar'>Paterson教授团队研发的一套指令集架构,</em><em class='similar'>其设计初衷是为了支持计算机体系结构的研究和教育,</em><em class='similar'>如今 RISC-V已经成为行业实施的标准免费开源指令集架构.</em>在 RISC-V指令子集中,包括基础指令集和扩展指令集,在使用过程中必须实现基础指令集,而作为 RISC-V的基础指令集- RV32I,仅包含了4种指令、且每种指令的编码方式都非常统一、富有规律,简单明了的<br />使用文档也让许多初学者能快速上手[20-21]。</p><p>RISC-V的指令集使用模块化的方式进行组织,<em class='similar'>每一个模块使用一个英文字符来表示。</em><em class='similar'>其中’I’表示的基本整数指令集部分是强制要求实现的部分,</em><em class='similar'>其他指令子集部分表示可选的模块。</em>标准拓展的 RISC-V指令集组成如表2.1所示。</p><p>表2.1 RISC-V指令集模块</p><p>指令集类型类型简写指令数说明</p><p>基本指令集</p><p>RV32I 47</p><p><em class='similar'>基本整数指令集</em>,<em class='similar'>包含算数指令、</em><em class='similar'>访存指令、</em><em class='similar'>环境调用等指令,</em><em class='similar'>具有32个32-bit通用寄存器,</em><em class='similar'>32位寻址</em><em class='similar'><br />空间</em></p><p><em class='similar'>RV32E 47 RV32I指令集简化版本,</em><em class='similar'>专为嵌入式设计,</em><em class='similar'>与 RV32I </em><em class='similar'><br />相比寄存器数量减少为16个</em></p><p><em class='similar'>RV64I 59整数指令,</em><em class='similar'>32个64-bit通用寄存器,</em><em class='similar'>64位寻址空间RV128I 71整数指令,</em><em class='similar'>32个128-bit通用寄存器,</em><em class='similar'>128位寻址空间</em></p><p>M <em class='similar'>8乘除扩展</em>,<em class='similar'>4条取余数,</em><em class='similar'>4条除法,</em><em class='similar'>5条乘法操作指令A 11原子扩展,</em><em class='similar'>包含原子读-修改-写、</em><em class='similar'>原子加减或、</em><em class='similar'>异或等F 26单精度浮点扩展,</em><em class='similar'>单精度访存、</em><em class='similar'>单精度浮点运算指令D 26双精度浮点扩展,</em><em class='similar'>双精度访存、</em><em class='similar'>双精度浮点运算指令</em><em class='similar'><br />Q 26四倍精度浮点指令扩展</em></p><p>C <em class='similar'>46压缩指令扩展</em>,<em class='similar'>16位指令编码,</em><em class='similar'>减少静/动态代码大小</em></p><p>其中,RV32和 RV64表示寄存器的位宽,决定了处理器寻址范围的大小。在</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 2章 相关技术分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p><em class='similar'>该指令集架构中基本整数指令集</em><em class='similar'>(Integer)</em>使用简写&quot;I&quot;来表示,<em class='similar'>该模块包含了整数计算指令、</em><em class='similar'>整数加载指令、</em><em class='similar'>整数存储指令和控制流指令,</em><em class='similar'>实现基本整数指令集是任何一款基于 RISC-V指令集架构的微处理器所必须满足的;</em><em class='similar'>标准的整数乘法和除法扩展</em><em class='similar'>(Multiply)</em>使用简写&quot;M&quot;表示,<em class='similar'>指令功能是对整数寄存器中保存的值进行乘法和除法操作;</em><em class='similar'>标准的原子指令扩展</em><em class='similar'>(Atomic)</em>使用简写&quot;A&quot;表示,<em class='similar'>添加原子性的读取、</em><em class='similar'>修改和写入内存的指令,</em><em class='similar'>保证了多核处理器间的访存一致性;</em><em class='similar'>单精度浮点扩展</em><em class='similar'>(Float)</em><em class='similar'>使用简写&quot;F&quot;来表示,</em><em class='similar'>该扩展增加了浮点寄存器、</em><em class='similar'>单精度计算指令和单精度加载以及存储指令;</em><em class='similar'>标准的双精度扩展</em><em class='similar'>(Double)</em>使用简写&quot;D&quot;表示,<em class='similar'>扩展了浮点寄存器,</em>并且增加了双精度计算、加载和存储指令。整数基数集加上四个标准扩展(即&quot;IMAFD&quot;)可以缩写为&quot;G&quot;,表示实现通用标量指令集。<em class='similar'>为了提高代码密度,</em><em class='similar'>RISC-V架构也提供可选的&quot;压缩&quot;指令子集</em>(Compress)<em class='similar'>,由英文字母&quot;C&quot;表示。</em><em class='similar'>压缩指令的指令编码长度为16比特,</em><em class='similar'>而普通的非压缩指令的长度为32比特。</em></p><p><em class='similar'>RISC-V指令集架构所使用的定点通用寄存器如表2.2所示,</em><em class='similar'>浮点通用寄存器如表2.3所示。</em></p><p>表2.2 RISC-V定点通用寄存器</p><p>寄存器助记符描述调用与被调用</p><p>x0 zero 硬编码为0-</p><p>x1 ra 返回地址寄存器调用者</p><p>x2 sp 堆栈指针寄存器被调用者</p><p>x3 gp 全局指针寄存器-</p><p>x4 tp 线程指针寄存器-</p><p>x5 t0临时/备用链接寄存器调用者</p><p>x6-7 t1-2临时寄存器调用者</p><p>x8 s0/fp 保存的寄存器/帧指针被调用者</p><p>x9 s1保存的寄存器被调用者</p><p>x10-11 a0-1函数参数/返回值寄存器调用者</p><p>x12-17 a2-7函数参数寄存器调用者</p><p>x18-27 s2-11保存的寄存器被调用者</p><p>x28-31 t3-6临时寄存器调用者</p><p>表2.3 RISC-V浮点通用寄存器</p><p>寄存器助记符描述调用与被调用</p><p>f0-7 ft0-7浮点临时寄存器调用者</p><p>f8-9 fs0-1浮点保存寄存器被调用者</p><p>f10-11 fa0-1浮点参数/返回值寄存器调用者</p><p>f12-17 fa2-7浮点参数寄存器调用者</p><p>f18-27 fs2-11浮点保存寄存器被调用者</p><p>f28-31 ft8-11浮点临时寄存器调用者</p><p>RISC-V指令集有以下特点:</p><p>(1)<em class='similar'>一个完全开放的指令集架构,</em><em class='similar'>可供学术界和工业界免费使用;</em></p><p>(2)<em class='similar'>适用于直接本机硬件实现,</em><em class='similar'>而不仅仅是模拟或二进制转换的真正的 ISA;</em></p><p>图2.1体系结构模拟器在 CPU开发流程中的作用</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 2章 相关技术分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>(3)<em class='similar'>避免在微体系结构</em><em class='similar'>(例如:</em><em class='similar'>顺序、</em><em class='similar'>乱序、</em><em class='similar'>解耦微处理器)</em><em class='similar'>或微技术</em><em class='similar'>(例如:</em><em class='similar'>全定制、</em>ASIC、FPGA)<em class='similar'>实现中&quot;过渡架构&quot;,</em><em class='similar'>并且在这些实现中更有效率的</em><em class='similar'><br />一款指令集架构;</em></p><p>(4)<em class='similar'> RISC-V可以将指令集架构分成一个小的基本整数指令集架构,</em><em class='similar'>具备可选的标准扩展,</em><em class='similar'>以支持通用软件开发,</em><em class='similar'>并且可用于自定义加速器开发或教学;</em></p><p>(5)<em class='similar'>支持2008年修订的浮点 IEEE-754标准;</em></p><p>(6)<em class='similar'>一款支持广泛的用户级 ISA扩展和专用变体的指令集架构;</em></p><p>(7)<em class='similar'>适用于应用程序,</em><em class='similar'>操作系统内核以及计算机硬件实现32位或64位地址</em><em class='similar'><br />空间变体;</em></p><p>(8)<em class='similar'>该指令集架构支持包括异构多核处理器在内高度并行多核的实现;</em></p><p>(9)<em class='similar'>可供用户选则的可变长度指令格式,</em><em class='similar'>对可用指令编码空间进行扩展,</em><em class='similar'>指令集架构所支持的可选密集指令编码用以提高性能,</em><em class='similar'>减小静态代码大小以及提</em><em class='similar'><br />升能量效率;</em></p><p>(10)<em class='similar'>完全可虚拟化的 ISA,</em><em class='similar'>可简化虚拟机管理程序开发;</em></p><p>(11)<em class='similar'>一个简化了新的管理员级和管理程序级的 ISA设计。</em></p><p>2.3体系结构模拟器</p><p><em class='reference'>模拟器是体系结构量化分析的重要手段,对架构设计、芯片开发有重要的指导作用.基于模拟器辅助进行集成电路设计可以追溯到1980年代[22],自此模拟器便一直是处理器设计过程中不可或缺的工具.在芯片开发过程中,</em>体系结构模</p><p><em class='reference'>拟器可以缩短处理器的设计时间,降低开发成本,其具体作用如图2.1所示:</em></p><p>由图1可知:</p><p><em class='reference'>1)在芯片开发早期,基于模拟器可以进行微结构探索和粗粒度微结构定义,</em></p><p><em class='reference'>此时模拟器的开发抽象层次较高.</em></p><p><em class='reference'>2)随着处理器设计的不断推进和模拟器的不断完善,基于模拟器可以持续</em></p><p><em class='reference'>对芯片微结构进行评估、修改和取舍.</em></p><p><em class='reference'>3)当模拟器趋于成熟,可以对微结构、多核互联系统、一致性协议等进行详</em></p><p><em class='reference'>细性能分析,基于分析结果对微结构进行微调.</em></p><p>图2.2体系结构模拟器开发流程图</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 2章 相关技术分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p><em class='reference'>4)在对处理器逻辑设计进行验证的阶段,模拟器可以作为参考模型辅助进</em></p><p><em class='reference'>行验证,可以快速定位逻辑设计错误.</em></p><p><em class='reference'>5)在未流片之前基于模拟器就可以开展系统软件开发和适配工作,这样可</em></p><p><em class='reference'>以在芯片流片结束后以最快速度启动系统软件.</em></p><p><em class='reference'>6)流片结束后,基于模拟器可以辅助进行芯片硅后验证环境的搭建以及测试用例编写工作.为了保证模拟器可以顺利辅助进行处理器设计,在整个芯片开发过程中,需要持续对模拟器进行校准,</em><em class='reference'>通过持续对比模拟器和寄存器传输层(Register-Transfer Level, RTL)之间的差别,可以互相校准并发现模拟器或者 RTL <br />的设计错误[23].</em></p><p><em class='similar'>体系结构模拟器根据模拟的详细程度可以分为功能模拟器</em><em class='similar'>(指令集模拟器ISS,</em>Instruction Set Simulator)<em class='similar'>和性能模拟器</em><em class='similar'>(时钟周期精确模拟器)</em><em class='similar'>两类。</em><em class='similar'>前者只模拟目标系统的指令集体系结构,</em><em class='similar'>比如寄存器状态、</em><em class='similar'>指令语义、</em><em class='similar'>存储器状态等功能特性;</em><em class='similar'>后者除了模拟功能特性外,</em><em class='similar'>还模拟目标系统的微体系结构,</em><em class='similar'>比如流水线、</em><em class='similar'>分支预测、</em><em class='similar'>Cache层次等</em>[24]。</p><p><em class='similar'>模拟开发的基本流程如图2.2所示。</em><em class='similar'>进行模拟,</em><em class='similar'>首先通过对实际硬件系统建模来将之具体化。</em><em class='similar'>建模与具体化的过程中必须保证所建模型的结构与实际硬件系统相近或一致,</em><em class='similar'>以确保所建模型的精确性,</em><em class='similar'>只有精确度较高的模型才能真实的模拟出硬件系统的行为,</em><em class='similar'>最终获得正确的结果。</em><em class='similar'>在对硬件系统的建模过程中,</em>需<br />图2.3体系结构模拟器在 CPU开发流程中的作用</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 2章 相关技术分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p><em class='similar'>要考虑所选择的算法是否合适。</em><em class='similar'>评价一种算法是否合适的准则在于是否符合模拟的要求和硬件系统的特征。</em><em class='similar'>为了保证最终的模拟精度,</em><em class='similar'>必须确保所选择算法的精度够高,</em><em class='similar'>稳定性够好。</em><em class='similar'>选定合适的算法后,</em><em class='similar'>进行程序设计,</em><em class='similar'>即用程序语言将模型描述出来。</em><em class='similar'>待确定程序模型的正确以后,</em><em class='similar'>就可以用这个模型来进行模拟实验,</em><em class='similar'>得到相应的结果。</em><em class='similar'>最后分析模拟结果,</em><em class='similar'>结果分析既可以是针对模型本身的数据,</em>对模型本身进行评价或研究,也可以是对模拟的目标系统性能作出评价。对于指令集模拟器 ISS,在设计过程中,需要充分考虑指令集模拟策略以及模拟器驱动方式。指令集模拟策略是 ISS设计的基础,它决定了模拟器的性能,同时也会影响模拟<em class='similar'>器调试模块的功能实现。</em><em class='similar'>因此在 ISS的设计之前,</em><em class='similar'>需要首先拟定指令集模拟策略。</em><em class='similar'>指令集模拟策略分为两种:</em><em class='similar'>基于解释型和基于编译型。</em></p><p>2.3.1解释型指令集模拟</p><p><em class='similar'>长期以来</em>,<em class='similar'>由于工作原理简单和模拟精度高,</em><em class='similar'>解释型指令集模拟器受到了广泛的关注</em><em class='similar'>(如 Gem5、</em><em class='similar'>SimpleScalar等)</em><em class='similar'>。解释型 ISS最大的特点在于直接将硬件</em></p><p><em class='similar'>行为映射到软件</em>[25],<em class='similar'>从而模拟出真实的硬件环境。</em><em class='similar'>由于其对指令进行逐条翻译,</em><em class='similar'>使得指令的执行可以很好的被控制。</em><em class='similar'>解释型指令集模拟器的工作流程很简单,</em>通常是取指-译码-执行的循环,<em class='similar'>如图2.3所示。</em></p><p>1)取指:模拟器取出目标程序的单条指令;</p><p>2)译码:模拟器对目标指令进行翻译,得到指令对应的功能函数;</p><p>3)执行:模拟器执行目标指令所对应的功能函数,完成功能函数中定义的软硬件行为。</p><p><em class='similar'>解释型 ISS的工作流程使得模拟器设计比较简单,</em><em class='similar'>易于建模和实现,</em><em class='similar'>且灵活性较好,</em><em class='similar'>模拟精度高。</em><em class='similar'>由于其对指令进行逐条翻译然后执行,</em><em class='similar'>使得模拟器调试木块很容易实现。</em>但是由于模拟器通过软件行为对指令进行逐条译码,相较于真实硬件电路效率太低,所以解释型 ISS的模拟速度一般不是很高。</p><p>图2.5体系结构模拟器在 CPU开发流程中的作用</p><p>图2.4体系结构模拟器在 CPU开发流程中的作用</p><p>第2章相关技术分析</p><p>2.3.2编译型指令集模拟</p><p>基于编译型的 ISS 通过对译码过程的改进,大幅度提升了模拟的效率,<em class='similar'>模拟器引入编译的思想,</em><em class='similar'>采用一次翻译多次执行的方法,</em>加速译码过程。<em class='similar'>通过将目标指令翻译成宿主机可识别的指令来完成对目标机状态的模拟。</em><em class='similar'>编译型 ISS根据译码过程处于编译还是运行时,</em><em class='similar'>又可分为静态编译型指令集模拟器</em>(StaticCompiled ISS)<em class='similar'>和动态编译型指令集模拟器</em>(Dynamic Compiled ISS)。由 Zhu and</p><p>Gajski [26]<em class='similar'>给出的静态编译型指令集模拟器将本处于运行时的指令译码过程转移</em></p><p><em class='similar'>至编译时</em>,<em class='similar'>如图2.4所示。</em><em class='similar'>目标机二进制代码经编译器编译,</em><em class='similar'>之后由代码生成器优化生成宿主机的二进制代码,</em><em class='similar'>并最终运行于宿主机。</em></p><p><em class='similar'>动态编译型指令集模拟器的典型代表为 Embra </em>[27]<em class='similar'>及 Shade </em>[28],<em class='similar'>其工作流程</em><em class='similar'><br />如图2.5所示:</em></p><p>其借鉴了 iCache的思想,模拟器取指之后<em class='similar'>判断该条指令是否是第一次执行,</em><em class='similar'>若是,</em><em class='similar'>那么对其进行译码,</em><em class='similar'>并将译码信息保存到 Cache中,</em><em class='similar'>然后执行;</em><em class='similar'>若不是,</em><em class='similar'>则直接在 Cache中调用该指令的译码信息执行。</em><em class='similar'>由于该技术在程序运行时进行指令译码,</em><em class='similar'>因此很难进行代码优化。</em></p><p>第2章相关技术分析</p><p>2.4本章小结</p><p>本章节主要介绍了 RISC-V 指令集架构的特点以及体系结构模拟器的相关技术。对体系结构模拟器的功能和开发流程做了介绍,并对几种常见的模拟器类型作了分析对比,其中详细介绍了指令集模拟器 ISS,对指令集模拟器的模拟流程以及两种指令集模拟策略的优缺点进行了阐述,最终结合 RISC-V指令集架构的特点,拟定了本次模拟器的设计方案:采用基于解释性的指令集模拟策略,结合动态编译型 ISS的译码优化策略,一方面丰富模拟器的调试手段,另一方面也可以提高模拟器执行效率。</p><p>第3章系统需求分析</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 3章 系统需求分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>需求分析是软件生产周期中的一个重要环节,本章将采用面向对象分析的方法对体系结构模拟器的需求进行具体分析与建模。明确模拟器所需实现的功能性需求和非功能性需求。</p><p>3.1需求导出</p><p>在芯片设计及验证的流程中,对于基础系统软件尤其是操作系统,底层驱动等的适配和验证往往是反馈硬件设计缺陷最频繁的部分,这部分的工作不仅是对于前期硬件设计的重要测试,也是后续用户态程序开发的基础。对于系统软件的移植和适配工作,有两种主流方式,一种是在模拟芯片硬件特性的 FPGA开发板上仿真,另一种是通过软件模拟。两种方法各有利弊,FPGA开发板更加接近真实硬件环境,能够获取精确的仿真信号,但是速度相对较慢,并且能够提供的调试信息较少。而模拟器环境下的开发,其运行速度接近宿主机,并且调试方便,虽然信号精度与真实硬件有差异,但是能够在测试的前期反馈大部分的缺陷。所以真实的开发和测试流程一般是先使用模拟器验证,再上 FPGA平台仿真,这样既能够提高开发效率,又不失精度。随着 RISC-V开源社区的日益壮大,更多的芯片设计厂商选择 RISC-V作为其指令集架构,在芯片的验证过程中,软硬件适配工作作为测试的重点,往往需要模拟器环境的支持。当前 RISC-V开源社区提供的模拟器作为教学工具可以帮助的初学者快速上手,但是对于实际的芯片开发团队来说,系统软件的移植和开发工作需要一款符合实际硬件设计的模拟器,对真实的硬件功能进行模拟,同时要能够提供强大的调试工具,方便系统软件的开发迭代。本模拟器主要用于芯片开发项目后期的验证工作和系统软件移植工作,对于一些具体的硬件细节,如流水线,分支预测等不进行模拟,只对处理器功能进行模拟,属于解释型的指令集模拟器。</p><p>3.2分析建模</p><p>指令集模拟器的主要参与者是进行系统软件开发和移植的程序员,通过对实际芯片开发验证过程的分析和归纳,得出模拟器所需要的主要功能有:</p><p>1)设置模拟器启动配置,包括 elf文件路径添加,指令集模块注册,运行模式选择等。</p><p>2)模拟器执行流程控制。包括正常运行模式下的 uart串口交互,暂停执行进入调试模式,模拟器重启。</p><p>图3.1系统软件开发/移植人员用例图</p><p>第3章系统需求分析</p><p>3)调试功能。在调试模式下,进行断点设置,内存查询,历史指令查询,单步执行等。</p><p>4)模拟外部中断信号发送。</p><p>综上所述,用户需求描述表如表3.1所示。</p><p>表3.1用户需求描述表</p><p>名称参与者说明</p><p>模拟器配置并启动系统软件开发/移植程序员设置模拟器启动参数并运行</p><p>切换至调试模式系统软件开发/移植程序员模拟器从运行模式切换为调试</p><p>模式</p><p>切换至运行模式系统软件开发/移植程序员模拟器从调试模式切换为运行</p><p>模式</p><p>重启模拟器系统软件开发/移植程序员重新加载当前配置项并运行断点设置系统软件开发/移植程序员调试模式下进行断点添加/移除内存查询系统软件开发/移植程序员调试模式下对虚拟地址/物理地<br />址内容查询</p><p>中断信号发送系统软件开发/移植程序员点击外部中断源按钮,发送对应</p><p>的外部中断到 plic</p><p>根据用例描述表可以得出系统软件开发/移植程序员的用例图如图3.1所示。</p><p>下面分别对系统软件开发/移植程序员的五个主要用例进行详细描述。模拟器配置启动的用例描述如表3.2所示。</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 3章 系统需求分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>表3.2模拟器配置启动用例描述</p><p>用例名称模拟器配置启动</p><p>用例描述设置模拟器启动参数并运行</p><p>触发条件勾选模拟器配置选项,输入 elf文件路径</p><p>后置条件模拟器解析配置参数,启动程序</p><p>(1)输入 elf文件路径</p><p>基本事件流(2)选择启动模式是否为调试模式</p><p>(3)其他参数勾选,包括核心数,模拟外设路径等</p><p>异常事件流配置参数错误,启动失败</p><p>模拟器切换调试模式用例描述如表3.3所示。</p><p>表3.3切换调试模式用例描述</p><p>用例名称切换调试模式</p><p>用例描述模拟器从运行模式切换为调试模式</p><p>触发条件点击 run/stop按键</p><p>后置条件模拟器进入调试模式/模拟器进入运行模式</p><p>基本事件流在运行模式下点击 run/stop按键</p><p>异常事件流运行模式下点击 run按键/调试模式下点击 halt按键</p><p>模拟器断点设置的用例描述如表3.4所示。</p><p>表3.4断点设置用例描述</p><p>用例名称断点设置</p><p>用例描述调试模式下进行断点添加/移除</p><p>触发条件在调试窗口勾选断点类型,输入断点条件,点击&quot;应用&quot;</p><p>后置条件</p><p>点击 run 进入运行模式,模拟器运行至断点条件触发调</p><p>试中断,进入调试模式</p><p>(1)调试窗口添加/移除断点</p><p>基本事件流(2)程序运行,触发断点</p><p>(3)进入调试模式,打印断点信息</p><p>异常事件流断点信息填写错误导致无效断点条件</p><p>模拟器内存查询的用例描述如表3.5所示。</p><p>模拟器 mailbox中断信号发送的用例描述如表3.6所示。</p><p>3.3非功能性需求</p><p>该指令集模拟器的非功能性需求有:</p><p>(1)准确性:体系结构模拟器的首要需求就是准确性,只有准确模拟出真实硬件的行为,才能在模拟器上进行后续的软件开发和移植工作。由于本模拟器的模拟精度在指令级别,不涉及到流水线,乱序执行,分支预测等更细粒度的模拟,因此要求模拟器要和真实硬件在寄存器级别完全一致。</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 3章 系统需求分析</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>表3.5内存查询用例描述</p><p>用例描述调试模式下对虚拟地址/物理地址内容查询</p><p>触发条件查询窗口输入内存地址,点击查询</p><p>后置条件输出内存对应地址内容</p><p>(1)选择地址类型为虚拟地址/物理地址</p><p>基本事件流(2)虚拟地址需要指定核心 id</p><p>(3)输入16进制地址,点击查询</p><p>异常事件流输入无效地址导致访存失败</p><p>表3.6 mailbox中断信号发送用例描述</p><p>用例名称 mailbox中断信号发送</p><p>用例描述点击外部中断源按钮,发送对应的外部中断到 plic</p><p>触发条件点击对应中断源的中断信号发送按键后置条件模拟器响应中断,执行中断处理程序<br />(1)点击 mailbox中断源发送中断信号</p><p>基本事件流(2)弹出 mailbox消息窗口,填写消息,点击发送</p><p>(3)系统接受外部中断,执行自定义的中断处理函数,显示在 mailbox窗口<br />异常事件流 mailbox中断发送后系统无响应</p><p>(2)可靠性:可靠性要求模拟器要能够在使用过程中持续稳定运行,不会因为宿主机上程序的设计缺陷导致模拟过程发生崩溃。如果遇到异常情况,模拟器需要能够在不修改启动配置的情况下重启成功,且模拟过程是可复现的。</p><p>(3)实时性:作为一个基于指令集翻译的体系结构模拟器,虽然本身的设计初衷不是为了测试 CPU性能,但是模拟器运行速度至少需要达到10MIPS。</p><p>(4)友好性:模拟器需要提供一个结构清晰的可视化界面,调试模式下需要能够及时更新处理器状态,包括寄存器值,历史汇编指令列表等。需要提供便捷的内存查询功能,外部中断模拟发送等。</p><p>3.4本章小结</p><p>本章主要是采用面向对象分析的方法,在实际的芯片开发项目过程中,对系统软件移植/开发/测试流程进行剖析,确定了指令集模拟器需要实现<em class='similar'>的功能以及其他的非功能性需求,</em><em class='similar'>最终形成了系统的需求规格说明书,</em><em class='similar'>为后续的系统概要设计,</em>具体实现以及最后的系统测试工作奠定了基础.</p><p>图4.1模拟器整体功能模块图</p><p>第4章系统概要设计</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 4章 系统概要设计</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>4.1系统概述</p><p>本系统是针对 RISC-V 芯片开发团队在系统软件开发和移植过程中使用的体系结构模拟器.将编译好的 RISC-V架构可执行代码加载到模拟器上运行,观察执行结果,能够脱离实际硬件平台进行系统软件的调试,也能帮助开发人员及时发现硬件实现可能存在的缺陷,从而提高整个芯片开发过程的效率。</p><p>4.2系统静态结构</p><p>RISC-V指令集模拟器的整体功能模块如图4.1所示,主要包含四个功能模块:预加载模块,指令流执行模块,调试模块和 UI显示模块。其中,预加载模块包括模拟器参数配置,指令集注册,加载 elf文件功能;指令流执行模块包括了主要的 Hart模拟,中断控制器模拟,内存模拟,外设模拟等功能,是模拟器的主体功能模块;调试模块包括断点设置,内存查询,模拟中断信号发送功能;UI显示模块包括目标层序执行窗口,调试窗口等的可视化界面和模拟器状态查询功能。</p><p>指令流执行模块是模拟器的主体功能模块,该模块模拟了单条指令执行过程的硬件行为,包括寄存器,总线,内存,MMU,缓存,通过内存映射的 I/O设备等。模拟出的 RISC-V CPU整体架构如图4.2所示,每个处理器都有独立的寄存器组,内存管理单元,所有处理器共享同一个 iCache,dCache,紧随其后的是<br />L2Cache和主存。</p><p>图4.2处理器结构图</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 4章 系统概要设计</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>处理器通过总线和其他内存映射的 I/O设备通信,包括 BootRom,RTC,UART串口控制器,平台级中断控制器,Mailbox等等.</p><p>4.3系统动态结构</p><p>本模拟器是 trace-accurate的指令集模拟器(功能模拟器),模拟器运行的基本流程如图4.3所示。</p><p>首先使用 RISC-V交叉编译工具链将目标程序编译为 RISC-V架构的 ELF文件,然后模拟器解析该 elf文件,将对应的指令流搬运到 bootrom,模拟器在配置启动后为处理器注册指令集,绑定解码器,逐条进行译码,执行。指令译码器完成包括操作数在内的指令信息提取,找到该条指令注册时对应的功能函数,执行该功能函数,然后将更新后的寄存器状态信息,内存状态信息同步到前端 UI显示模块。在模拟器运行的过程中,用户还可以通过前端交互调试窗口来切换模拟器运行模式,设置断点触发条件,进行单步调试,状态查询等操作。</p><p>4.3.1解码器与指令集功能函数</p><p><em class='similar'>RISC-V指令集是模块化的,</em><em class='similar'>它的核心是一个名为 RV32I的基础 ISA,</em><em class='similar'>可选的标准扩展包括MAFDC,</em><em class='similar'>根据应用程序的需要,</em><em class='similar'>硬件可以包含或不包含这些扩展。</em>本模拟器实现了特权指令集1.9版本,和用户指令集2.1版本的标准拓展指令集共196条指令的模拟。模拟器预加载时通过解析配置参数选择相应的指令集模块进行注册,并初始化解码器.流程如图4.4所示.</p><p>4.3.2指令流程控制</p><p><em class='similar'>指令的执行,</em><em class='similar'>分为取指、</em><em class='similar'>译码、</em><em class='similar'>执行三个步骤。</em>对于单条指令,在逻辑上这三个步骤是顺序的,同步的。所以对于功能模拟器,仍然可以把实际的流水线设<br />图4.3模拟器运行流程图</p><p>第4章系统概要设计</p><p>计看作是单周期的 CPU。处理器核的功能模拟主要包括存储管理单元MMU,高速缓存,以及寄存器组,这部分硬件功能模块都作为处理器核对象的私有成员;模拟器对象管理公有的内存部分,译码器,以及总线核外设.</p><p>MMU的功能模拟主要体现在处理器各个运行状态下的地址翻译功能.在真实的芯片设计中,缓存和MMU是两个独立的硬件模块,但是在功能模拟器中,为了实现的方便,可以将高速缓存模块放到 MMU功能模块中,在逻辑上仍然属于两个独立的功能模块,这样做对于处理器行为的模拟没有影响.由于模拟器对于缓存的模拟只能记录缓存的命中率等信息,并不能够真正起到硬件加速的效果,此外本次设计的模拟器作为功能模拟器并不需要对处理器性能指标进行模拟,所以直接舍弃 L2Cache的模拟,只在MMU模块中设置 iCache和 dCache,后续可以使用哈希的方式尝试进行部分优化.MMU和缓存的概要设计如图4.5所示。</p><p>图4.4指令集模块注册流程图</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 4章 系统概要设计</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>4.3.3中断控制器</p><p>在CPU运行过程中,存在两种指令流程,一种是常规的逻辑控制流,包括顺序的指令流和分支跳转;另一种称为异常控制流,用来响应处理器状态的某些变化,表现为中断或异常.之前的章节已将介绍了 CPU指令流程控制的设计,主要是取值/译码/执行的逻辑控制流程,本模拟器的一大设计需求就是要能够模拟器部分外设,从而进行对应驱动程序的开发和测试.大部分的外设都需要通过外部中断的方式与处理器核进行交互,所以本模拟器必须要实现平台级中断控制器 PLIC,下面将介绍终端模块的整体设计.首先,对于中断模块的被动响应方,处理器核对于中断信号的响应需要在单个指令执行周期内完成,所以模拟器在单条汇编指令的取值动作之前将对处理器核的状态寄存器进行检查,判断当前是否有待处理的中断信号,然后完成相应的硬件动作;其次,对于中断的主动发起方,PLIC需要进行多个外部中断源的优先级裁决,控制中断源的使能情况,并对所有处理器核的优先级门限进行筛查,对符合条件的所有中断目标发起外部中断请求.PLIC连接到模拟器的所有处理器核心,对内表现为黑盒,处理器不关心中断控制器的内部逻辑,只针对相应的外部中断信号,以及中断源 id,进行对应的中断响应.PLIC与处理器核的关系如图4.6所示.</p><p>图4.5 MMU和缓存工作流程图</p><p>第4章系统概要设计</p><p>4.3.4交互调试模块</p><p>本模拟器的主要功能就是进行目标程序的调试工作,包括 bootloader,linux内核,驱动程序等.因此本模拟器的设计不仅需要提供丰富的调试手段,还要能够提供友好的可视化界面,方便进行目标程序调试,加快系统软件的开发/测试/迭代周期.调试模块的功能集成在上述的处理器指令流程控制模块以及前端 UI模块之中.其中,UI模块的可视化界面提供调试信息的设置,查询功能,后端模拟器指令执行流程中将对设置的调试信息进行匹配,将断点匹配结果,调试查询结果反馈到前端 UI模块,与开发人员进行调试交互.该模块需要提供断点设置,单步执行,寄存器/内存查询等功能.UI显示界面主要包含了断点设置窗口,查询窗口和执行交互窗口.</p><p>4.3.5本章小结</p><p><em class='similar'>本章主要是根据系统的需求规格说明书,</em><em class='similar'>对 RISC-V指令集模拟器进行概要设计,</em>确定了本模拟器的四个主要功能模块:指令集模块,CPU和总线模块,中断<br />图4.6 PLIC外部中断</p><p>第4章系统概要设计</p><p>模块,以及交互调试模块.描述了模拟器整体运行流程,并对各模块的功能逻辑进行设计,明确了 RISC-V 指令集模拟器的总体框架,动态流程以及各模块设计方案.</p><p>图5.1 RISC-V32I指令格式</p><p>第5章系统详细设计与实现</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p><em class='similar'>系统的详细设计主要是对概要设计中各个功能模块的实现细节进行阐述,</em>给出具体的设计方案.本章节将分别对模拟器四个主要功能模块的具体设计和实现细节进行阐述和说明.</p><p>5.1指令集模块的实现</p><p>指令集模块主要实现了两个功能,指令集功能函数的翻译,以及解码器对指令列表的解析和注册.</p><p>对应单条汇编指令的取值,译码,执行过程,模拟器从 PC地址读取一条32位的汇编指令,通过解码器进行解码,找到对应的功能函数,然后执行该功能函数.核心的数据结构就是指令类 insn_t,除了包含32位的 uint 数据成员来保存指令内容,还定义了一系列的接口,方便读取 RISC-V指令格式所定义的指令码,寄存器,立即数等的位域信息.下面详细介绍模拟器对于指令类数据结构的定义和实现.由前面的章节可以知道,RISC-V汇编指令的格式是非常明晰的,图5.1展示了</p><p>RISC-V32I所包含的全部六种指令类型的格式。在实际编码过程中,编码位置的安排都是有意义的。例如3个寄存器索引号在不同指令格式中的编码位置是永远不变的,Rd在 bit 7-11,rs1在 bit 15-19,rs2在 bit 20-24。即使有些指令中可能没有用到部分寄存器,比如第二个指令类型 I-type中没有 rs2,但是 rs1和 rd的索引号也在对应的位置上。又例如在 S-type里 funct3在 bit 12-14,与在 R-type中的位置一致。Opcode是所有指令格式都有的,而且位置不变,永远都是 bit 0-6。</p><p>所以在指令类 insn_t中可以定义统一的接口来获取 RISC-V指令中的位域信<br />息.代码片段如下:</p><p>t ypede f qu i n t 64 i n s n _ b i t s _ t ;</p><p>c l a s s i n s n _ t</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>i n s n _ t ()= de f au l t ;</p><p>i n s n _ t ( i n s n _ b i t s _ t b i t s ): b ( b i t s ){}</p><p>i n s n _ b i t s _ t b i t s (){ re turn b ;}</p><p>i n t l e n g t h (){ re turn i n s n _ l e n g t h ( b );}</p><p>i n t 64_ t i_imm (){ re turn i n t 64_ t ( b )&gt;&gt;20;}</p><p>i n t 64_ t s_imm (){ re turn x (7,5)+( xs (25,7)&lt;&lt;5);}</p><p>i n t 64_ t sb_imm (){ re turn ( x (8,4)&lt;&lt;1)+( x (25,6)&lt;&lt;5)+( x (7,1)&lt;&lt;11)+( imm_sign ()&lt;&lt;12);}</p><p>i n t 64_ t u_imm (){ re turn i n t 64_ t ( b )&gt;&gt;12&lt;&lt;12;}</p><p>i n t 64_ t uj_imm (){ re turn ( x (21,10)&lt;&lt;1)+( x (20,1)&lt;&lt;11)+( x (12,8)&lt;&lt;12)+( imm_sign ()&lt;&lt;20);</p><p>qu i n t 64 rd (){ re turn x (7,5);}</p><p>q u i n t 64 r s 1(){ re turn x (15,5);}q u i n t 64 r s 2(){ re turn x (20,5);}q u i n t 64 r s 3(){ re turn x (27,5);}</p><p>q u i n t 64 rm (){ re turn x (12,3);}</p><p>q u i n t 64 c s r (){ re turn x (20,12);}</p><p>i n t 64_ t rvc_imm (){ re turn x (2,5)+( xs (12,1)&lt;&lt;5);}i n t 64_ t rvc_zimm (){ re turn x (2,5)+( x (12,1)&lt;&lt;5);}</p><p>i n t 64_ t rvc_addi4spn_imm (){ re turn ( x (6,1)&lt;&lt;2)+( x (5,1)&lt;&lt;3)+( x (11,2)&lt;&lt;4)+( x (7,4)&lt;&lt;6)</p><p>;}</p><p>i n t 64_ t rvc_addi16sp_imm (){ re turn ( x (6,1)&lt;&lt;4)+( x (2,1)&lt;&lt;5)+( x (5,1)&lt;&lt;6)+( x (3,2)&lt;&lt;7)</p><p>+( xs (12,1)&lt;&lt;9);}</p><p>i n t 64_ t rvc_lwsp_imm (){ re turn ( x (4,3)&lt;&lt;2)+( x (12,1)&lt;&lt;5)+( x (2,2)&lt;&lt;6);}i n t 64_ t rvc_ldsp_imm (){ re turn ( x (5,2)&lt;&lt;3)+( x (12,1)&lt;&lt;5)+( x (2,3)&lt;&lt;6);}</p><p>i n t 64_ t rvc_swsp_imm (){ re turn ( x (9,4)&lt;&lt;2)+( x (7,2)&lt;&lt;6);}</p><p>i n t 64_ t rvc_sdsp_imm (){ re turn ( x (10,3)&lt;&lt;3)+( x (7,3)&lt;&lt;6);}</p><p>i n t 64_ t rvc_lw_imm (){ re turn ( x (6,1)&lt;&lt;2)+( x (10,3)&lt;&lt;3)+( x (5,1)&lt;&lt;6);}</p><p>i n t 64_ t rvc_ld_imm (){ re turn ( x (10,3)&lt;&lt;3)+( x (5,2)&lt;&lt;6);}</p><p>i n t 64_ t rvc_j_imm (){ re turn ( x (3,3)&lt;&lt;1)+( x (11,1)&lt;&lt;4)+( x (2,1)&lt;&lt;5)+( x (7,1)&lt;&lt;6)+( x</p><p>(6,1)&lt;&lt;7)+( x (9,2)&lt;&lt;8)+( x (8,1)&lt;&lt;10)+( xs (12,1)&lt;&lt;11);}</p><p>i n t 64_ t rvc_b_imm (){ re turn ( x (3,2)&lt;&lt;1)+( x (10,2)&lt;&lt;3)+( x (2,1)&lt;&lt;5)+( x (5,2)&lt;&lt;6)+( xs <br />(12,1)&lt;&lt;8);}</p><p>i n t 64_ t rvc_simm3(){ re turn x (10,3);}</p><p>q u i n t 64 r v c_ r d (){ re turn rd ();}</p><p>q u i n t 64 r v c _ r s 1(){ re turn rd ();}</p><p>q u i n t 64 r v c _ r s 2(){ re turn x (2,5);}</p><p>q u i n t 64 r v c _ r s 1 s (){ re turn 8+ x (7,3);}q u i n t 64 r v c _ r s 2 s (){ re turn 8+ x (2,3);}</p><p>pr i v a t e :</p><p>i n s n _ b i t s _ t b ;</p><p>q u i n t 64 x ( i n t lo , i n t l e n ){ re turn ( b &gt;&gt; l o )&amp;(( i n s n _ b i t s _ t (1)&lt;&lt; l e n )−1);}</p><p>qu i n t 64 xs ( i n t lo , i n t l e n ){ re turn i n t 64_ t ( b )&lt;&lt;(64− lo − l e n )&gt;&gt;(64− l e n );}</p><p>qu i n t 64 imm_sign (){ re turn xs (63,1);}</p><p>};</p><p>我们可以在后续功能函数的实现中使用上述的接口,极大的提高模拟效率.区别于其他指令集架构的设计,RISC-V 的译码过程是比对 opcode 和 func位域信息,通过 riscv-opcodes 工具生成的头文件包含了所有标准指令集模块的指令格式信息,每条汇编指令都包含一对 MASK 和 MATCH 信息,真实的译码过程是将指令内容与 MASK 取位与运算,得到的结果和 MATCH 一致表示是该条汇编指令.在模拟器实现过程中只需要为解码器开辟一块内存空间,存放(MATCH,MASK,insn_t)的三元组即可,为了加快译码速度,在模拟器设计中,采用了哈希表的数据结构进行存储.具体的实现细节如图所示.</p><p>定义了指令数据结构和解码器之后,取指,译码的过程就完成了,接下来介绍执行步骤的核心内容,指令集功能函数的实现.</p><p>指令集功能函数是整个指令集模拟的核心部分,理论上说,汇编指令的功能函数需要和实际的硬件设计一一对应,由于硬件设计所参考的指令集架构版本已经定义了各个汇编指令的功能和具体行为,所以对于指令集的功能模拟只需要参照相应的指令集手册.本模拟器的设计过程依托于具体的芯片项目,由于大多数的硬件设计团队针对不同的性能指标往往会进行一些取舍,尤其是对于 RISC-V这样的开源架构,实际的设计肯定会和官方版本有所出入,所以在模拟器的设计<br />图5.2状态寄存器位域信息</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>上还是需要参照硬件设计团队的代码.</p><p>本次设计依托的芯片开发项目使用 chisel进行硬件设计,通过其生成的 scala代码,可以指导模拟器指令功能函数的翻译,如图所示为 scala代码到 c语言模拟程序的翻译过程.</p><p>5.2 CPU和总线的实现</p><p>上一节介绍了指令集模块的实现,从一个较高的抽象层次对模拟器的功能进行了定义,本节将详细介绍硬件的模拟细节,主要包含 CPU内部的各个功能部件,以及 CPU与片外通信的桥梁-总线的设计与实现.</p><p>5.2.1寄存器模拟</p><p>寄存器是 CPU 预先定义的可以用来存储数据的位置,汇编指令的执行过程主要就是对寄存器和其他存储器的读写过程,因此对于寄存器的模拟需要做到精确且高效.</p><p>RISC-V体系结构中,定义了两类寄存器,整数和浮点寄存器 XPR<em class='similar'>/FPR;控制与状态寄存器</em><em class='similar'>(control and status register,</em> CSR).<em class='similar'>由于前者属于通用数据寄存器</em>,在用户模式和机器模式下的访问方式一致,因此只需要将其定义为处理器类内部的共有成员,可以直接由处理器对象获取并修改.CSR 寄存器主要由特权集指令进行位操作,表示 CPU状态的改变,后续的调试模块也需要重点关注 CSR的状态,因此在模拟实现上需要提供统一的接口,一方面为了简化指令集功能函数的实现,另一方面也可以节省参数传递等过程带来的性能损失.</p><p>寄存器类图如图所示.总体设计上,三组寄存器均封装在 processor_t类内部,其中通用寄存器组可以被处理器类对象直接调用,进行读写操作;CSR 寄存器组被声明为类私有成员,对外提供 get_csr(),set_csr()统一接口.将 CSR寄存器访问权限,状态寄存器位域信息获取等操作封装在接口内部,这样就可以使指令集功能函数的实现不必关心具体的寄存器实现细节.对于 CSR 寄存器接口的实现主要需要考虑三个因素,检查寄存器组所需的指令集模块支持;处理器当前权限模式检查;以及状态寄存器写入格式的检查.</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>以状态寄存器 CSR_MSTATUS 为例.如图5.2所示,<em class='similar'>mstatus 寄存器是一个 XLEN 位的可读/可写寄存器,</em><em class='similar'>其格式如图所示。</em><em class='similar'>mstatus 寄存器持续跟踪和控制硬件线程的当前操作状态。</em>在写 status 寄存器的过程中,需要检查VM,MPP,MPRV,PUM,MXR 位是否有变化,如果上述的位域发生改变,表示处理器状态发生改变,需要在寄存器读写之前判断当前特权等级。如图是汇编指令 mret的定义以及功能函数实现。</p><p>r e q u i r e _ p r i v i l e g e (PRV_M);</p><p>s e t _ p c ( p−&gt; g e t _ s t a t e (). mepc );</p><p>r e g _ t s = STATE . ms t a t u s ;</p><p>r e g _ t p r ev_p rv = g e t _ f i e l d ( s , MSTATUS_MPP);</p><p>s = s e t _ f i e l d ( s , MSTATUS_UIE &lt;&lt; prev_prv , g e t _ f i e l d ( s , MSTATUS_MPIE));</p><p>s = s e t _ f i e l d ( s , MSTATUS_MPIE ,1);</p><p>s = s e t _ f i e l d ( s , MSTATUS_MPP, PRV_U);</p><p>p−&gt; s e t _ p r i v i l e g e ( p r ev_p rv );p−&gt; s e t _ c s r (CSR_MSTATUS, s );</p><p>在 set_csr()接口的实现中,需要对于 CSR的读写进行检查,一方面是为了确保读写时所处的特权级模式是否支持读写,另一方面需要针对状态寄存器的改变做出相应的动作,比如 tlb的清除等.</p><p>case CSR_MSTATUS:</p><p>{</p><p>i f (( v a l ^ CSR . ms t a t u s )&amp;(MSTATUS_VM | MSTATUS_MPP | MSTATUS_MPRV | MSTATUS_PUM | MSTATUS_MXR))</p><p>mmu−&gt; f l u s h _ t l b ();</p><p>r e g _ t mask = MSTATUS_SIE | MSTATUS_SPIE | MSTATUS_MIE | MSTATUS_MPIE</p><p>| MSTATUS_SPP | MSTATUS_FS | MSTATUS_MPRV | MSTATUS_PUM <br />| MSTATUS_MPP | MSTATUS_MXR ;</p><p>i f ( v a l i d a t e _vm ( max_xlen , g e t _ f i e l d ( va l , MSTATUS_VM)))</p><p>mask |= MSTATUS_VM;</p><p>CSR . ms t a t u s =(CSR . ms t a t u s &amp;~mask )|( v a l &amp; mask );</p><p>bool d i r t y =(CSR . ms t a t u s &amp; MSTATUS_FS)== MSTATUS_FS ;</p><p>d i r t y |=(CSR . ms t a t u s &amp; MSTATUS_XS)== MSTATUS_XS;</p><p>i f ( max_xlen ==32)</p><p>CSR . ms t a t u s = s e t _ f i e l d (CSR . ms t a tu s , MSTATUS32_SD , d i r t y );</p><p>e l s e</p><p>CSR . ms t a t u s = s e t _ f i e l d (CSR . ms t a tu s , MSTATUS64_SD , d i r t y );</p><p>x l e n = max_xlen ;</p><p>break ;</p><p>}</p><p>除了上述的寄存器,每个处理器对象都维护私有的 PC程序计数器,初始化过程中 PC被初始化为 bootrom地址.</p><p>5.2.2 MMU和缓存模拟</p><p><em class='similar'>内存管理单元</em><em class='similar'>(Memory Management Unit,</em> MMU)<em class='similar'>是一种负责处理 CPU内存访问请求的计算机硬件。</em><em class='similar'>它的功能包括虚拟地址到物理地址的转换</em><em class='similar'>(即虚拟内存管理)</em><em class='similar'>、内存保护、</em><em class='similar'>中央处理器高速缓存的控制等。</em></p><p>在 RISC-V 体系结构中,<em class='similar'>与 MMU 有关的 CSR 寄存器主要有控制与状态寄存器 mstatus 和管理员页表基址寄存器 sptbr.</em><em class='similar'>在 mstatus 状态寄存器中,</em><em class='similar'>虚拟化管理字段 VM</em><em class='similar'>[4:0]</em><em class='similar'>指示了当前活跃的虚拟化方案,</em><em class='similar'>包括虚拟存储器翻译和保护。</em><em class='similar'>图5.3给出了当前定义好的虚拟化方案。</em><em class='similar'>对于一个 RISC-V硬件实现,</em><em class='similar'>只有Mbare模式是强制要求的,</em><em class='similar'>该模式没有存储器管理或翻译,</em><em class='similar'>因此所有的有效地址,</em><em class='similar'>无论其特权模式,</em><em class='similar'>都被认为是机器物理地址,</em><em class='similar'>是复位时进入的模式,</em>理论上在该模式下不需要经过MMU进行地址翻译。Sv39和 Sv48是针对 RV64系统的基于页面<br />图5.3 RISC-V虚拟化方案</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p><em class='similar'>的虚拟存储器体系结构,</em><em class='similar'>提供了一个39位或者48位的虚拟地址空间,</em><em class='similar'>被设计成支持现代管理员级操作性,</em><em class='similar'>包括基于 Unix的系统。</em>Sv39、<em class='similar'>Sv48需要实现支持M、</em><em class='similar'>S和U特权级。</em>本模拟器支持上述三种虚拟化方案,但是为了实现方便,所有的主存访问请求都需要经过 MMU,通过 MMU模块的统一接口进行访存,当 mstatus寄存器 VM位为0时,无需进行地址翻译.以 linux内核加载过程中从物理地址向虚拟地址过渡的逻辑可以看出,当内核支持MMU时,会进入到 relocate代码段进行页表基地址寄存器的初始化,以后首级页表会常驻内存,内核通过 setup_vm()函数进行了首级页表的加载,然后在 relocate段计算了首级页表基地址,写入 sptbr寄存器,然后通过一条 mret指令跳转到 U-mode执行,接下来就全是加载虚拟地址了,MMU开始工作.</p><p># i f d e f CONFIG_MMU</p><p>r e l o c a t e :</p><p>l i a1, PAGE_OFFSET</p><p>l a a2,_ s t a r t</p><p>sub a1, a1, a2</p><p>add ra , ra , a1</p><p>l a a2,1 f</p><p>add a2, a2, a1</p><p>csrw CSR_TVEC, a2</p><p>s r l a2, a0, PAGE_SHIFT</p><p>l i a1, SATP_MODE</p><p>or a2, a2, a1</p><p>l a a0, t r ampo l i n e _ p g _ d i r <br />s r l a0, a0, PAGE_SHIFT</p><p>or a0, a0, a1</p><p>s f e n c e . vma</p><p>csrw sp t b r , a0</p><p>. a l i g n 2</p><p>1:</p><p>/* S e t t r a p v e c t o r t o s p i n f o r e v e r t o he l p debug */</p><p>l a a0,. L seconda ry_pa rk</p><p>csrw CSR_TVEC, a0</p><p>/* Reload t h e g l o b a l p o i n t e r */</p><p>. o p t i o n push</p><p>. o p t i o n n o r e l a x</p><p>l a gp ,__ g l o b a l _ p o i n t e r $</p><p>. o p t i o n pop</p><p>csrw sp t b r , a2</p><p>s f e n c e . vma</p><p># e n d i f /* CONFIG_MMU */</p><p>在本模拟器的实现中,MMU模块包含了快表 TLB,加速地址翻译,本质上就</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>是开辟了一片内存用来存放翻译过的地址映射,为了方便起见,只实现了直接映射的 TLB.另外,将 iCache,dCache的功能也一并放到 MMU模块中,不再实现单独的缓存硬件模块,缓存采用只写的方式.这样的设计和真实硬件的差异很大,会导致缓存模拟的不准确.考虑到本模拟器并不进行缓存相关的性能模拟,所以可以忽略这部分的差别,在功能模拟上没有影响.模拟器的存储结构模型如图1.1所示.</p><p>MMU模块对取值做特殊处理,取值首先会查找 iCache,当 iCache未命中时,退化为其余类型的访存.访存请求通过模板函数提供的统一的接口 load/store进行请求,通过模板可以忽略具体的数据类型,在功能函数的实现中也可以更加方<br />便的使用,直接调用MMU的接口对存储单元进行操作.模板函数定义如下:</p><p>template &lt; c l a s s T&gt;</p><p>i n l i n e T load ( r e g _ t add r )</p><p>{</p><p>i f ( add r &amp;( s i z e o f (T )−1))</p><p>throw t r a p _ t ( t r a p _ l o a d _ a d d r e s s _m i s a l i g n e d , add r );</p><p>r e g _ t vpn = add r &gt;&gt; PGSHIFT ;</p><p>i f ( l i k e l y ( t l b _ l o a d _ t a g [ vpn % TLB_ENTRIES ]== vpn ))</p><p>re turn *(T*)( t l b _ d a t a [ vpn % TLB_ENTRIES ]+ add r );</p><p>T r e s ;</p><p>l o ad_ s l ow_pa t h ( addr , s i z e o f (T ),( u i n t 8_ t *)&amp;r e s );</p><p>re turn r e s ;</p><p>}</p><p>其中,load_slow_path()意味着 TLB miss,需要查找页表,通过页表进行地址翻<br />译的伪代码如图所示:</p><p>综上,整个MMU和缓存模块的实现流程如图??所示.</p><p>5.2.3总线和 I/O模拟</p><p>总线是 CPU 与外部设备进行数据交换的桥梁,<em class='similar'>按照功能划分可以分为地址总线,</em><em class='similar'>数据总线和控制总线.</em>本模拟器对总线设备进行了抽象,将总线设计为某一块物理地址区间内的 IO控制器,提供统一接口,处理 CPU和内存映射的 IO设备之间的通信.</p><p>总线在模拟器初始化的过程中会根据配置挂载设备,在总线类 bus_t中维护一个物理地址和设备类对象的 map,模拟器在接收到访存请求时,首先检查物理地址是否是主存地址范围,不在主存地址区间内的 I/O请求都是内存映射的 I/O请求(Memory-Mapped I/O, MMIO),模拟器将调用总线设备的 IO接口,对内存映射的外设进行读写操作.</p><p>模拟器根据物理地址划分为主存,和内存映射的 IO 设备,图5.4是 SiFive公司提供的内存映射参考.本模拟器的总线设备需要处理的内存映射空间就是</p><p>0x000000000x80000000,提供这块内存区间上的 IO 模拟.总线设备可以挂载各种通过内存映射的 IO设备,某些具有特殊用途的寄存器也能够挂载在总线,比如timecmp寄存器,ipi寄存器.</p><p>总线设备的定义如下:</p><p>图5.4 SiFive公司的内存映射方案</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>c l a s s bu s_ t : pub l i c a b s t r a c t _ d e v i c e _ t <br />{</p><p>pub l i c :</p><p>bool l o ad ( r e g _ t addr , s i z e _ t l en , u i n t 8_ t* by t e s );</p><p>bool s t o r e ( r e g _ t addr , s i z e _ t l en , cons t u i n t 8_ t* by t e s );</p><p>void add_dev i c e ( r e g _ t addr , a b s t r a c t _ d e v i c e _ t* dev );</p><p>void a d d _ r e g i s t e r ( r e g _ t addr , a b s t r a c t _ d e v i c e _ t* dev , q i n t 32 o f f s e t );</p><p>pr i v a t e :</p><p>s t d :: map&lt; r eg_ t , a b s t r a c t _ d e v i c e _ t*&gt; d e v i c e s ;</p><p>s t r u c t d e v i c e _ r e g</p><p>{</p><p>d e v i c e _ r e g (){}</p><p>d e v i c e _ r e g ( a b s t r a c t _ d e v i c e _ t *dev , q i n t 32 o f f s e t ): dev ( dev ), o f f s e t ( o f f s e t ){}</p><p>a b s t r a c t _ d e v i c e _ t *dev ;</p><p>q i n t 32 o f f s e t ;</p><p>};</p><p>QMap&lt; r eg_ t , d ev i c e_ r eg &gt; r e g s ;</p><p>};</p><p>bus_t类型的 load/store属于 mmio接口,首先会检查挂载在总线上的设备或寄存器地址是否匹配,然后才会对具体的设备进行读写操作.下面介绍几种以MMIO方式挂载在总线上的设备模拟.</p><p>所有支持 Secure Boot的 CPU都会有一个 bootrom固件.CPU在通电之后执行的第一条指令就在 bootROM的入口。bootROM拥有最高的执行权限,也就是机器模式M-mode。它将初始化 Secure Boot安全机制,加载 Secure Boot Key等密钥、从存储器加载并验证 First Stage Bootloader(FSBL),最后跳转进 FSBL中。本次芯片设计项目也包含了该部分的设计,但是由于涉密,在模拟器设计中并不涉及 FSBL的加载和验证过程,bootrom固件程序仅仅用来跳转置目标程序入口.具体的实现方式包括以下的步骤,首先在配置中读取 bootrom的地址,默认0x1000,</p><p>然后初始化 bootrom设备,填写 bootrom固件内容,本模拟器的 bootrom程序内容<br />如图所示,包含两条汇编指令:</p><p>auipc t0,0x7ffff</p><p>图5.5 MMIO请求流程</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>jr t0</p><p>模拟器启动后,PC初始化0x1000,以机器模式执行上述两条指令,跳转到主存起始位置,即目标程序的入口地址.接下来的一系列指令执行由目标程序决定,主要包括 bootloader的 reset vector以及加载 linux内核的过程.</p><p>总线对象使用 add_device接口将物理地址0x1000和 bootrom设备对象的映射保存在字典中.</p><p>mmio的通信流程如图5.5所示.</p><p>5.3中断系统的实现</p><p>在 CPU运行过程中,存在两种指令流程,一种是常规的逻辑控制流,包括顺序的指令流和分支跳转;另一种称为异常控制流,用来响应处理器状态的某些变化,表现为中断或异常.之前的章节已将介绍了 CPU指令控制流程的模拟,其中包括了响应中断的逻辑,CPU 在取值之前检查当前是否有中断信号,根据状态寄存器判断是否响应中断,进入异常控制流逻辑.本节将详细阐述模拟器中断系统的实现.包括两种中断控制器以及部分中断源的模拟.</p><p>RISC-V一共有两大类的中断类型:局部中断(Local Interrupts)以及全局中断(Global Inerrupts)。局部中断是指直接与 hart相连的中断,可以直接通过 CSRs当中的 xcause(mcause、scause、ucause)中的值得知中断的类型。在局部中断当中,只有两种标准的中断类型:计时中断(timer)以及软件中断(software)。全局</p><p>中断实际上就是外部中断(External Interrupts)。它与 PLIC相连<em class='similar'>(Platform-Level </em><em class='similar'><br />Interrupt Controller,</em><em class='similar'>平台级中断控制器)</em>。实际上全局中断在多个硬件线程的情况下最为常用。PLIC用于对外部中断进行仲裁,然后再将仲裁的结果送入核内</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>的中断控制器。<em class='similar'>RISC-V架构中规定了一些硬件行为来实现异常事件的响应和处理,</em><em class='similar'>这些行为通过控制状态寄存器来反应异常事件信息.</em>涉及到如下几个寄存器,见表5.1.</p><p>表5.1中断相关的寄存器</p><p>mstatus</p><p><em class='similar'>状态寄存器</em>,<em class='similar'>保存全局中断使能以及许多其他的状态。</em><em class='similar'>只讨论机器模式的情况下,</em><em class='similar'>有效的域只有 MIE 和 MPIE。</em><em class='similar'>MIE表示中断全局使能,</em><em class='similar'>只有该位有效时,</em><em class='similar'>才能产生中断。</em><em class='similar'>MPIE 位保存进入中断处理之前以及恢复现场之前MIE的状态。</em></p><p><em class='similar'>mie 外部中断使能寄存器,</em><em class='similar'>外部中断响应的使能位有效时才</em></p><p>能进入处理</p><p>mtvec 异常入口基地址寄存器,<em class='similar'>可配置为查询或向量访问模式。</em><em class='similar'>高位 BASE域表示异常向量的基地址。</em></p><p><em class='similar'>mscratch 上下文切换时用于保存当前的指针信息</em></p><p>mepc 异常 PC寄存器,<em class='similar'>进入中断处理时,</em><em class='similar'>硬件会自动将当前遇</em></p><p>到的中断的 PC保存 mepc中</p><p>mcause</p><p><em class='similar'>异常原因寄存器,</em><em class='similar'>mcause</em><em class='similar'>[31]</em><em class='similar'>为中断域,</em><em class='similar'>其余位为异常编号域。</em>如果是有中断事件待处理,会将 interrupt位置</p><p>1。<em class='similar'>Exception Code字段保存待处理事件的标识代码。</em><em class='similar'>中间位读时返回0,</em><em class='similar'>作为保留位可以在之后用于支持异常</em><br />编码的字段扩展</p><p><em class='similar'>mip 外部中断事件标志信号,</em><em class='similar'>当有外部中断事件发生时,</em>mip</p><p>中对应中断标志位置高</p><p><em class='similar'>mbadaddr 外部中断事件标志信号,</em><em class='similar'>当有外部中断事件发生时,</em>mip</p><p>中对应中断标志位置高</p><p>本模拟器实现了这部分的硬件行为,包括中断源的产生,和中断响应,下面进行详细的介绍.在处理器类内定义了两个 uint64型数据,分别用来表示时钟中断和外部中断的 pending,总线上挂载的设备可以直接对这两个 pending数据进行设置,用来模拟外设&quot;异步&quot;的中断请求发起.处理器在下一个取值周期之前,使用try-catch 语句来处理可能的中断响应,如果处理器决定响应中断,就会抛出一个</p><p>trap_t类型的异常,进入到响应中断的异步逻辑.trap_t的定义如下:</p><p>c l a s s t r a p _ t</p><p>{</p><p>pub l i c :</p><p>t r a p _ t (){}</p><p>t r a p _ t ( r e g _ t t yp e ): c au se ( t yp e ), a d d r _ v a l i d ( f a l s e ){}</p><p>t r a p _ t ( r e g _ t type , q u i n t 64 add r ): c au se ( t yp e ), a d d r _ v a l i d ( t rue ), add r ( add r ){}</p><p>r e g _ t c au se ;</p><p>bool a d d r _ v a l i d ;</p><p>q u i n t 64 add r ;</p><p>s t a t i c QMap&lt; r eg_ t , QSt r ing &gt; names ;</p><p>s t a t i c qu i n t 64 d e l e g a b l e _ e x c e p t i o n s ;</p><p>QS t r i ng &amp;name (){ re turn names [ c au se ];}</p><p>处理器响应的流程如图5.6所示.</p><p>模拟器抛出异常后,根据捕获到的 trap_t,<em class='similar'>进入中断处理流程.</em><em class='similar'>RISC-V特权架构对这部分的处理器行为做了一定规范,</em>本模拟器的实现也参照了特权架构定义.</p><p>图5.6处理器响应中断流程</p><p>第5章系统详细设计与实现</p><p>1)根据处理的中断类型将信号源编号记录到 mcause寄存器中;</p><p>2)地址不对齐或者发生访问异常,将导致错误的指令部分保存到 mbadaddr;</p><p>3)更新状态寄存器 mstatus,记录中断处理前的状态;</p><p>4)保存当前 PC到 mepc寄存器中,以便于处理完中断后返回;</p><p>5)停止当前执行程序流,设置 PC为 mtvec中断向量表入口地址并开始执行.以上就是中断产生和响应过程对应的处理器硬件行为模拟,接下来将着重阐述平台级中断控制器 PLIC的实现.</p><p>5.3.1 PLIC模拟</p><p>PLIC的功能是接受外部中断源发出的中断信号,对中断请求进行裁决,将裁决结果和外部中断信号发送给处理器.本模拟器参照了 SiFive公司的 PLIC规范文档进行设计,通过设备树的挂载对内存映射的存储器进行读写,配置 PLIC.图5.7是 SiFive公司给出的 PLIC规范框架图.</p><p>中断源(interrupt sources)是挂载在 PLIC 上的设备的统称,一般是 I/O 设<br />图5.7 SiFive公司的 PLIC框架</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>备.<em class='similar'>PLIC 理论上支持任意多个中断源,</em><em class='similar'>每个中断源可以是不同触发类型,</em><em class='similar'>电平</em><em class='similar'><br />触发或者边沿触发、</em><em class='similar'>PLIC为每个中断源分配了如下的信息:</em></p><p>1)闸口(Gateway)和 IP(interrupt pending).闸口控制中断源发送中断请求.IP标识当前中断源是否有请求.IP拉高时,闸口不再接受该中断源的请求.</p><p>2)设备编号 ID.<em class='similar'>PLIC为每个中断源分配了一个独一无二的编号 ID.</em><em class='similar'>该 ID也作为在多个 sources具有相同优先级是的选择条件,</em><em class='similar'>数值较小优先级更高。</em></p><p>3)优先级(Priority).每个中断源都有一个内存映射的 Priority寄存器,表示该中断源的优先级,软件可以通过配置(设备树)将其设置成不同的优先级.优先级的数字越大,表示优先级越高.</p><p><em class='similar'>中断使能</em><em class='similar'>(Enable)</em><em class='similar'>.每个中断源均分配了一个内存映射的中断使能寄存器,</em>和优先级一样也可以通过设备树进行配置.IE寄存器配置为0表示该中断源被中断目标屏蔽,反之则是使能.</p><p>中断目标(interrupt targets)对应为 RISC-V 处理器核心的各个特权级模式。PLIC 产生的外部中断请求会分别标示在处理器的 mip 寄存器的 meip/seip 位,对应于机器模式和监管模式。每个中断目标都有对应的内存映射的优先级门限(priority threshold)寄存器,只有中断源优先级高于该门限,PLIC才会将中断源 ID发送给对应中断目标。</p><p>PLIC Core负责所有中断请求的仲裁和分发.图5.8展示了 PLIC处理外部中断的流程.</p><p>将中断源和中断目标分别抽象成 plic_dev_info_t类和 plic_core_info_t类,在外设模拟中,通过 connect_plic 接口初始化设备类中的 plic_dev_info_t 对象,并</p><p>将自身挂载到 PLIC设备上,后续设备的 IO请求可以通过 plic_dev_info_t::raise()</p><p>图5.8 PLIC中断处理流程</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>接口发送到 PLIC 设备,模拟了闸口的功能.PLIC 设备类型 plic_t 中定义了 ac-</p><p>cept_interrupt 接口用来拉高对应设备的 pengding 寄存器,plic_t::raise()接口实现了中断信号裁决,将裁决后的中断 ID写入 mclaim和 sclaim寄存器,<em class='similar'>并且向处理器发送外部中断信号,</em><em class='similar'>当处理器响应中断时,</em>会读取这两个寄存器的值,<em class='similar'>然后进入中断向量表,</em><em class='similar'>查找对应的中断处理函数,</em>通常会调用定义在内核 drives目录下的驱动程序.中断处理结束后,处理器会给 PLIC core发送中断完成信息,具体的动作就是对 PLIC中断源指定位置 claim寄存器发送一条 store指令,根据 SiFive公司给出的规范,中断源 ID为 n的的 claim/complete寄存器内存映射位置等于(plic基地址+0x200004+0x1000*n),因此该位置进行 store请求时直接调用处理器对应plic_core_info_t对象的 gate_open()接口来打开闸口.此时 plic完成一次外部中断请求周期,可以挂起下一次的中断请求.</p><p>根据以上的流程,实现 PLIC中断控制器的设备类图如图5.9所示。</p><p>5.3.2 RTC模拟</p><p>CLINT(Core-Local Interruptor, PLIC)局部中断控制器是一个存储器地址映射模块,CLINT只负责处理软件中断和时钟中断,因为这两个中断是 RISC-V架构中定义的,经过 CLINT不需要进行任何的仲裁,直接将中断信号写入对应的寄存器内即可。软件中断只需要向 CLINT的MSIP0或者 SSIP0寄存器的最高位写1即可,处理完中断后,将其置为0,这样就能够清除掉软件中断的标志位。计时<br />图5.9 PLIC设备类图</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>器中断作为 riscv内核特有的中断,其用法就是往MTIMECMP或者 STIMECMP中写特定的值,当mtime达到该值时产生中断,此时继续填写特定的 tick就可以继续产生下个中断,反复如此,便可产生周期性的 tick中断。</p><p>5.4调试模块和 UI实现</p><p>调试模块能够提供断点设置,单步执行,寄存器/内存查询等功能.UI 显示界面主要包含了断点设置窗口,查询窗口和执行交互窗口.本模块使用 Qt 的 UIDesigner 工具进行开发,通过拖拽摆放各种窗口控件并进行属性设置,观察界面整体效果,可以方便地进行可视化界面的设计.另外 QtWidget 库还提供了信号(Signals)和槽(Slots)机制,用于对象间通信,只需要在对应窗口子类化 widgets来添加自定义信号,然后实现自定义的槽函数,连接到该信号即可.模拟器前端整体界面如图5.10所示.</p><p>前端 UI窗口和后端模拟器之间的信号定义如下:</p><p>enum sim_cmd</p><p>{</p><p>sim_cmd_pause_sim ,</p><p>sim_cmd_run_sim ,</p><p>s im_cmd_ run_ s im_s i l e n t l y ,</p><p>s im_cmd_step_sim ,</p><p>s im_cmd_rese t_s im ,</p><p>sim_cmd_access_memory ,</p><p>s im_cmd_se t_b reaks ,</p><p>s im_cmd_key_input ,</p><p>s im_cmd_mai lbox_ inpu t</p><p>enum window_cmd</p><p>window_cmd_update_reg ,window_cmd_update_mem ,window_cmd_sim_output ,window_cmd_gst_output ,</p><p>window_cmd_pause_sim ,</p><p>window_cmd_update_mailbox</p><p>图5.10模拟器前端整体界面</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 5章 系统详细设计与实现</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>其中 sim_cmd_key_input 和 sim_cmd_mailbox_input 信号分别用来模拟UART 和 mailbox 外部中断源信号.其余信号用于断点和查询信息的交互,以及模拟器单步运行等流程的控制.</p><p>断点设置窗口如图所示,可以添加任意多个断点,断点匹配类型分为如下几种:PC,寄存器,内存,中断类型.当模拟器包含多核时需要指定相应的核心id 号.当模拟器处于调试模式时,中断指令流程,此时可以进行断点设置,内存查询等操作,点击运行按键,模拟器恢复至正常运行模式,在每一次指令执行周期完成后模拟器将对当前断点信息进行检查,一旦匹配上任意断点,将发送 window_cmd_sim_output 信号用于告知触发断点信息,并接着发送 win-dow_cmd_pause_sim 信号,中断指令流程,模拟器进入调试模式.每发送一次单步执行信号,模拟器都需要将寄存器更新信号发送给 UI前端,刷新寄存器窗口.模拟器单步执行的流程如图5.11所示.</p><p>5.5本章小结</p><p>本章主要在概要设计的基础上对 RISC-V 指令集模拟器四个功能模块的详细设计和实现细节进行了阐述,并根据实际工程项目中使用的设备和具体型号 IP文档,进行了部分外设的功能模拟,验证了模拟器的可用性,最后完成了前后端所有功能模块的代码实现,并给出了相应的演示效果图.</p><p>图5.11调试模式下单步执行流程</p><p>第5章系统详细设计与实现</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 6章 系 统 测 试</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>6.1测试概要</p><p>系统测试是系统开发过程中必不可少的重要阶段,<em class='similar'>是确保系统开发质量的关键,</em><em class='similar'>它贯穿于系统开发的整个过程,</em>尽可能地发掘系统中存在的问题和错误,可以及时地进行纠错,促进系统开发工作高效有质量地进行.</p><p>6.1.1测试环境</p><p>RISC-V模拟器的测试环境分为软件模拟环境和硬件对照环境,软件模拟环境是系统设计使用到的第三方库和模拟器的宿主机环境,硬件对照环境主要是芯片开发过程中的 FPGA开发板 S2C Single U440平台以及流片后的真实芯片环境.具体的模拟器环境如表6.1所示.</p><p>表6.1系统测试环境</p><p>名称说明</p><p>Ubuntu20.04模拟器的宿主机环境</p><p>Qt5 Qt5的 UI类库</p><p>BBL(berkele-bootloader) RISC-V官方的 bootloader <br />linux-v5.10目标程序 linux内核版本</p><p>busybox-1.32.1 linux命令集合</p><p>6.1.2概述</p><p>本模拟器的测试采用测试驱动开发方式进行,主要过程如下:</p><p>(1)根据需求分析中确定的芯片开发团队成员需求和系统概要设计中划分的四个功能模块,采用黑盒法设计对应的测试用例,当各个功能模块代码实现后立刻开始测试.</p><p>(2)根据需求分析中的需求规格说明,使用场景法对模拟器进行配置项测试,测试模拟器的业务功能是否满足需求.</p><p>(3)最后进行系统测试,重点测试 linux内核移植过程中的 MMU启动,挂载PLIC外设,以及调试功能是否满足后续的系统软件移植开发需求.</p><p>6.2测试分析</p><p>测试分析主要对模拟器的测试需求进行分析,包含可以直接获取的显式功能性需求和系统中隐含的隐性需求比如模拟器运行速度.在系统开发的不同阶段,测试的需求也有所不同,本节所分析的测试需求有:模块测试需求,配置项测试需求和系统测试需求.下面对主要的测试需求展开分析.</p><p>6.2.1模块测试需求获取</p><p>根据系统概要设计,本模拟器分为四个功能模块,下面对各个功能模块的测</p><p>试需求进行分析:</p><p>(1)指令集模块:该模块解析模拟器启动参数,获取指令集配置,对相应的指令集模块进行注册,为后续的指令译码,以及功能函数调用提供所需的数据,依据概要设计的要求,主要测试该模块能否将所需指令集全部注册进解码器,并且在后续译码执行过程中调用正确的功能函数.</p><p>(2) CPU和总线模块:该模块用于模拟处理器执行过程中的硬件行为,依据概要设计的要求,主要测试该模块的寄存器读写过程;访存请求涉及到的 MMU行为,包括快表查询,iCache查询,通过页表的地址翻译过程;经过总线的 mmio请求过程.主要测试其正确性.</p><p>(3)中断模块:该模块用于模拟中断控制器的软硬件行为,依据概要设计的要求,主要测试通过 PLIC挂载设备的中断请求过程能够被处理器响应,中断控制器能够做到规范文档的功能要求.</p><p>6.2.2配置项测试需求获取</p><p>根据 RISC-V指令集模拟器的需求规格说明书,对于系统软件开发测试人员的需求进行配置项测试,主要是对模拟器加载目标程序的流程测试,以及后续目标程序的流程控制测试,包括<em class='similar'>设置断点</em>,<em class='similar'>单步调试,</em><em class='similar'>寄存器/内存查询,</em>外部中断信号发送.系统软件开发测试人员通过对目标程序的流程控制,可以方便地进行软件移植工作,加快系统软件的开发迭代.</p><p>6.2.3系统测试需求获取</p><p>根据需求规格说明书,本模拟器需要进行系统软件的移植测试.包括了 boot-load和 linux内核,在此移植过程中,对模拟器的整体功能部件进行测试,主要有linux加载过程中的MMU启动,PLIC挂载外设,并将中断源通过设备注册到操作系统.</p><p>6.3测试用例设计</p><p>针对系统开发的各个阶段,测试用例的设计和采用的设计方法都有所不同,下面对各个阶段的测试用例进行设计.</p><p>6.3.1模块测试用例设计</p><p>依据模块测试的需求,对 RISC-V指令集模拟器的四个功能模块进行测试,各<br />个模块的测试用例设计如下:</p><p>(1)指令集模块:根据测试需求,该模块的功能是根据模拟器启动参数加载对应的指令集模块,对指令列表进行注册,将指令格式和对应的功能函数绑定起来,完成解码器的初始化工作,该模块检测到未定义指令模块,会发出告警信息,提示未定义行为.具体的测试用例设计如表6.2所示.</p><p>表6.2指令集模块测试用例表</p><p>序号输入预期输出说明</p><p>1指令集标准拓展</p><p>rv64imafdc</p><p>模拟器注册指令列表</p><p>的全部内容,解码器保</p><p>存指令格式和功能函</p><p>数的映射</p><p>验证功能模块的有效</p><p>性</p><p>2未定义指令集拓展</p><p>rv64jkl</p><p>提示未定义的指令集</p><p>拓展</p><p>验证功能模块的健壮</p><p>性</p><p>3未定义功能函数的自</p><p>定义指令</p><p>解码器提示功能函数</p><p>未定义</p><p>验证功能模块的健壮</p><p>性</p><p>(2) CPU和总线模块:根据测试需求,该模块的功能是模拟指令执行过程中的硬件行为,包括寄存器,MMU,缓存,内存,IO控制器等,测试目的是验证该模块的硬件行为模拟和真实硬件行为一致.该模块的输入总是已注册的指令,不会有其他未定义输入,主要检测是否达到预期输出,具体的测试用例设计如表6.3所示.</p><p>表6.3 CPU和总线测试用例表</p><p>序号输入预期输出说明</p><p>4汇编指令 ld t01000通用数据寄存器 t0内</p><p>容0x1000</p><p>验证功能模块的有效</p><p>性</p><p>5汇编指令 csrw mtevc,</p><p>t0</p><p>CSR 寄存器 mtevc 被</p><p>写入 t0寄存器的值</p><p>验证功能模块的有效</p><p>性</p><p>6机器模式下的内存查</p><p>询请求</p><p>MMU 显示 Mbare 模</p><p>式,不进行地址翻译</p><p>验证功能模块的有效</p><p>性</p><p>7监管模式下的 sv39内</p><p>存查询请求</p><p>MMU 查询页表,输出</p><p>地址翻译过程</p><p>验证功能模块的有效</p><p>性</p><p>和序号7同一地址的</p><p>监管模式下的 sv39内</p><p>存查询请求</p><p>MMU 查询快表,TLB</p><p>命中,输出查询内容</p><p>验证功能模块的有效</p><p>性</p><p>(3)中断控制器模块:根据测试需求,该模块的功能是将内存映射的 I/O设备挂载到中断控制器,和处理器进行通信.测试目的为了验证中断控制器能够对外部中断信号源进行有效裁决,并配合处理器完成外部中断的流程,以及测试当外部中断源优先级低于处理器门限寄存器时能否屏蔽该中断源.具体的测试用例设计如表6.4所示.</p><p>(4)调试模块和 UI:根据测试需求,该模块的功能是对目标程序运行流程进<br />表6.4中断控制器测试用例表</p><p>序号输入预期输出说明</p><p>9对 UART 的 mmio 请</p><p>前端窗口输出请求回</p><p>验证功能模块的有效</p><p>UART 以优先级2挂</p><p>载到 PLIC,处理器机</p><p>器模式和监管模式的</p><p>门限优先级设置为3</p><p>UART 中断源的外部</p><p>中断请求</p><p>验证功能模块的健壮</p><p>性</p><p>行控制,切换至调试模式进行断点设置,寄存器/内存查询,单步调试等功能,测试目的是验证该模块通过 UI将调试信号发送给后端模拟器,并进行断点匹配的过程,还有验证寄存器/内存查询的正确性,以及查询无效内存地址给出告警信息的过程.具体测试用例设计如表6.5所示.</p><p>表6.5调试模块和 UI测试用例表</p><p>序号输入预期输出说明</p><p>11调试模式下单步执</p><p>行信号</p><p>模拟器执行完一条指令</p><p>后发出更新信号,前端 UI</p><p>刷新寄存器状态</p><p>验证功能模块的有效</p><p>性</p><p>12断点信息 pc core0</p><p>0x80000000</p><p>核0在 PC=0x80000000</p><p>处匹配断点,进入调试模</p><p>式,输出断点信息</p><p>验证功能模块的有效</p><p>性</p><p>内存地址</p><p>0x80000000查</p><p>询信号</p><p>0xif80006f</p><p>对应汇编指令 j pc+504</p><p>表示跳转到 reset_vector</p><p>验证功能模块的有效</p><p>性</p><p>14内存地址0xffffffff</p><p>查询信号</p><p>发出警告信息,无效内存</p><p>地址</p><p>验证功能模块的健壮</p><p>性</p><p>6.3.2配置项测试用例设计</p><p>依据配置项测试需求,采用基于实际业务的场景设计法对 RISC-V指令集模拟器的 RISC-V架构目标程序调试功能进行测试用例设计.该功能设计的基本流有:1.设置断点信息,点击应用后,调试窗口发送断点信号到模拟器后端,添加新的断点信息到处理器断点检测列表;2.删除处理器断点检测列表中的某一项;3.点击单步执行,模拟器进行一次取值,译码,执行周期,更新寄存器状态窗口,输出当前指令到指令历史窗口;4.输入待查询内存地址,点击查询,模拟器进入 MMU访存逻辑,查询当前地址内容;5.点击运行,模拟器进入运行模式,将交互信息输出到交互窗口;该功能的备选流有:1.设置断点信息错误,导致处理器断点检测列表添加失败;2.输入无效地址导致内存查询失败,发出告警信息.基本流和备选流可以组合成各个场景,进而对每个场景设计测试用例,具体的测试用例设计如表6.6所示.</p><p>表6.6配置型测试用例表</p><p>序号操作预期输出说明</p><p>15设置断点信息,点击应</p><p>处理器断点检测列表</p><p>基本流1,备选流1</p><p>16删除某一断断点信息删除成功基本流2</p><p>17点击单步执行</p><p>寄存器状态更新,指令</p><p>历史窗口更新</p><p>基本流3</p><p>18输入内存地址,点击查</p><p>询</p><p>对应内存地址的内容基本流4,备选流2</p><p>19调试模式下点击运行</p><p>更新目标程序的交互</p><p>信息</p><p>基本流5</p><p>6.3.3系统测试用例设计</p><p>依据系统测试需求,主要对 RISC-V指令集模拟器进行稳定性测试,容错性测<br />试和性能测试,下面分别对各个测试进行测试用例设计:</p><p>(1)稳定性测试:依据系统测试需求,模拟器需要在加载给定的目标程序后不间断地稳定运行.因此稳定性测试设计为模拟器加载 linux 内核运行 top 程序三天,预期结果是模拟器可以一直持续运行,并且实时检测模拟 CPU的进程状态.</p><p>(2)容错性测试:依据系统测试需求,从一下两个方面进行测试用例设计:加载含有未定义指令的程序,检测程序能否陷入对应的异常(illegal instruction);设置错误的断点信息,检测模拟器在端点检测逻辑是否会发生因设计错误导致的程序崩溃.</p><p>(3)性能测试:依据系统测试需求,记录模拟器在断点检测列表为空的状态下,和含有断点检测列表的状态下的 MIPS(Million instruction per-second),和实际的硬件 MIPS 做对比,测试模拟器模拟速度.另外从模拟器进行系统软件调试的功能考虑,记录了在模拟器和真在实硬件平台上的调试周期,进行对照测试,分析模拟器在软件移植/开发/测试流程中的性能.</p><p>6.4测试结果及分析</p><p>使用各个测试阶段所设计的测试用例,对 RISC-V指令集模拟器展开了单元<br />测试,配置项测试和系统测试,具体测试结果如下:</p><p>(1)在单元测试中对模拟器的四个功能模块都进行了测试,经过五次回归实验后,各个功能模块实际输出与预期输出达成一致,各个模块的功能和健壮性都得到了验证,达到了需求规格说明书中的需求。</p><p>(2)在配置项测试中对模拟器的目标程序调试功能进行测试,各个测试用例的实际输出与预期输出一致,所测业务功能满足设计需求。</p><p>(3)在系统测试中对模拟器进行稳定性测试、容错性测试和性能测试.稳定性</p><p>图6.1模拟器正常运行 UI界面</p><p>测试时系统正常运行情况如图6.1所示;容错性测试达到了预测的结果.从测试结果可以看出吸烟检测系统的可靠性满足需求规格说明书中的需求;通过和真实硬件平台的对照,在系统软件移植开发流程中,模拟器的软件迭代周期要明显比硬件平台效率更高,性能要求也达到了预期的结果.</p><p>6.5测试结论</p><p>经过一系列的测试,RISC-V指令集模拟器能够长时间稳定运行,进行目标程序的跨平台模拟执行.对于可能的异常行为,模拟器提供了丰富的调试手段,方便芯片开发团队进行问题排查,针对发现的硬件缺陷或者软件错误,及时进行修正,进行下一轮的测试迭代.一方面可以对硅后处理器验证起到辅助验证的作用,一方面也能够加快系统软件的开发速度,脱离硬件进行并行的移植开发工作,大大缩短了系统软件的开发周期.</p><p>但是在实际的使用过程中,本模拟器对于后续的驱动程序开发,需要经常对各种外设进行模拟,这部分的模拟主要参照各个设备厂商 IP,对于模拟过程可能产生的错误较难及时发现.<em class='reference'>此外在芯片开发过程中,需要及时对模拟器进行迭代,</em>修正与真实芯片的功能差异,这就需要软件开发人员和硬件设计人员及时有效地沟通,无法做到职责分离.因此本模拟器还是存在较大的改进空间.</p></p>
                </div>

                <h2 style="width:100%;text-align:center;margin-top:15px;">第 7章 结论与展望</h2>
                <h3 style="line-height:40px;">原文内容</h3>
                <div class="textOrig_con">
                    <p><p>随着 RISC-V指令集架构的不断完善,RISC-V软件生态的不断蓬勃发展,未来的芯片设计与开发行业将越来越多地看到 RISC-V 的身影.本文依托实际的RISC-V芯片设计与开发项目,实现了 RISC-V指令集模拟器,用于 RISC-V架构软件的移植工作,以及针对具体微结构设计的验证工作完成了既定的功能需求,使得芯片开发团队可以脱离硬件平台进行系统软件移植/开发/测试工作,提供对真实硬件的功能模拟,以及丰富的调试手段,缩短软件开发周期.主要完成的工作<br />如下:</p><p>(1)参照 RISC-V 用户手册,特权级架构手册,以及实际的硬件设计方案,对RISC-V标准拓展指令集共196条汇编指令进行 C++功能函数模拟,其中大部分指令功能可以直接由 RISC-V 指令集手册获取,少部分指令(主要是特权架构指令)参照硬件设计团队具体的 chisel代码进行翻译,对硬件设计的功能框架进行建模,确定模拟器的实现方案,规划具体功能模块的边界.</p><p>(2)实现 RISC-V指令集模拟器前后端模块,添加丰富的调试手段,设计并实现平台级中断控制器 PLIC和部分外设模拟,可以直接在模拟器进行外设驱动的开发,结合实际项目需求,添加 UI 可视化界面,进一步加强模拟器的易用性.在实际的芯片开发项目中帮助团队进行系统软件开发工作,并对处理器进行辅助验证.</p><p>本文开发的 RISC-V指令集模拟器基本能够满足芯片开发团队的需求,但是后续的测试以及日常的使用过程中,发现本模拟器还是存在一些不足,需要在未<br />来不断地进行改进和优化,主要包括以下两点:</p><p>(1)本模拟器没有提供保存快照的功能,有时调试过程中出现了异常的状态,因为随机的因素较难复现,所以保存快照的功能还是比较重要.</p><p>(2)本文设计的 RISC-V指令集模拟器是依托具体的芯片开发项目,针对不同的微架构,需要进行微调才能够正常使用,可拓展性方面还有待提高,这方面的缺陷也是体系结构模拟器的通病,过分依托单一硬件.作为 RISC-V架构的体系结构模拟器,在后续可以对功能模块进一步抽象,针对具体硬件相关的部分可以因地制宜具体实现,比如寄存器实现策略,中断控制器实现策略等.</p><p class='uncheck'>参 考 文 献</p><p class='uncheck'>[1] 胡振波. 手把手教你设计 CPU——RISC-V处理器篇[M]. 1版. 北京: 人民邮电出版社,</p><p class='uncheck'>[2] 胡振波. RISC-V架构与嵌入式开发快速入门[M]. 1版. 北京: 人民邮电出版社, 2019.</p><p class='uncheck'>[3] 金立忠,窦勇. 微处理器体系结构模拟器 SimpleScalar分析与优化[J]. 计算机应用研究,2006(8): 197-198.</p><p class='uncheck'>[4] 何锐. GPGPU多核流体系结构与功耗模拟研究[D]. 国防科学技术大学, 2010.</p><p class='uncheck'>[5] ZHANG F X, ZHANG L B, HU W W. Sim-godson: A godson processor simulator based on</p><p class='uncheck'>simplescalar[J]. CHINESE JOURNAL OF COMPUTERS-CHINESE EDITION-, 2007, 30</p><p class='uncheck'>(1): 68.</p><p class='uncheck'>[6] GAOX, ZHANG FX, TANGY, et al. Simos-goodson: A goodson-processor based multi-corefull-system simulator.[J]. Ruan Jian Xue Bao(Journal of Software), 2007, 18(4): 1047-1055.[7] AUSTIN T, LARSON E, ERNST D. Simplescalar: An infrastructure for computer systemmodeling[J]. Computer, 2002, 35(2): 59-67.</p><p class='uncheck'>[8] DESIKAN R, BURGER D, KECKLER S W, et al. Sim-alpha: a validated execution driven</p><p class='uncheck'>alpha 21264 simulator[R]. Technical Report TR-01-23, Department of Computer Sciences,University of , 2001.</p><p class='uncheck'>[9] KISTLER M. Experiences in simulation at ibm[Z].</p><p class='uncheck'>[10] BOHRER P, PETERSON J, ELNOZAHY M. Mambo: a full system simulator for the powerpcarchitecture[J]. ACM SIGMETRICS Performance Evaluation Review, 2004, 4(31): 8-12.</p><p class='uncheck'>[11] ASAAD S, BELLOFATTO R, BREZZO B, et al. A cycle-accurate, cycle-reproducible</p><p class='uncheck'>multi-fpga system for accelerating multi-core processor simulation[C]//Proceedings of theACM/SIGDA international symposium on Field Programmable Gate Arrays. 2012: 153-162.[12] CHAIX F, IOANNOU A, KOSSIFIDIS N, et al. Implementation and impact of an ultra-</p><p class='uncheck'>compact multi-fpga board for large system prototyping[C]//2019 IEEE/ACM InternationalWorkshop on Heterogeneous High-performance Reconfigurable Computing (H2RC). IEEE,2019: 34-41.</p><p class='uncheck'>[13] MAGNUSSON P S, CHRISTENSSON M, ESKILSON J, et al. Simics: A full system simu-lation platform[J]. Computer, 2002, 35(2): 50-58.</p><p class='uncheck'>[14] CEZE L, STRAUSS K, ALMASI G, et al. Full circle: Simulating linux clusters on linux</p><p class='uncheck'>clusters[C]//Proceedings of the Fourth LCI International Conference on Linux Clusters: TheHPC Revolution 2003. 2003.</p><p class='uncheck'>[15] BELLARD F. Qemu, a fast and portable dynamic translator.[C]//USENIX annual technicalconference, FREENIX Track: volume 41. Califor-nia, USA, 2005: 10-5555.</p><p class='uncheck'>[16] HUANG YICHUN. Proemulator plug-in developer’s guide[R]. 2004.</p><p class='uncheck'>[17] 柯化成. 嵌入式系统全系统模拟器框架设计与实现[D]. 浙江大学, 2006.</p><p class='uncheck'>[18] 刘畅, 武延军, 吴敬征, 等. RISC-V 指令集架构研究综述[J]. 软件学报, 2021, 32(12):3992-4024.</p><p class='uncheck'>[19] 胡伟武. 计算机体系结构[M]. 2版. 北京: 清华大学出版社, 2017.</p><p class='uncheck'>[20] WATERMAN A, LEE Y, PATTERSON D A, et al. The risc-v instruction set manual. volume</p><p class='uncheck'>1: User-level isa, version 2.0[R]. California Univ Berkeley Dept of Electrical Engineering andComputer Sciences, 2014.</p><p class='uncheck'>[21] WATERMAN A, LEE Y, PATTERSON D, et al. The risc-v instruction set manual[J]. VolumeI: User-Level ISA’, version, 2014, 2.</p><p class='uncheck'>[22] MUKHERJEE S S, ADVE S V, AUSTIN T, et al. Performance simulation tools[J]. Computer,2002, 35(02): 38-39.</p><p class='uncheck'>[23] 张乾龙,侯锐,杨思博,等. 体系结构模拟器在处理器设计过程中的作用[J]. 计算机研究与发展, 2019, 56(12): 2702.</p><p class='uncheck'>[24] 喻之斌,金海,邹南海. 计算机体系结构软件模拟技术[J]. 软件学报, 2008(4): 1051-1067.[25] S.DWARKADAS, J.R.JUMP. Execution-driven simulation of mu1tiprocessors:address and</p><p class='uncheck'>timing analysis[J]. ACM Transactions on Modeling and Computer Simulation, 1994, 4(4):314-338.</p><p class='uncheck'>[26] ZHU J, GAJSKI D D. A retargetable, ultra-fast instruction set simulator[C]//Proceedings ofthe conference on Design, automation and test in Europe. 1999: 62-es.</p><p class='uncheck'>[27] WITCHEL E, ROSENBLUM M. Embra: Fast and flexible machine simulation[C]//</p><p class='uncheck'>Proceedings of the 1996 ACM SIGMETRICS international conference on Measurement andmodeling of computer systems. 1996: 68-79.</p><p class='uncheck'>[28] CMELIK B, KEPPEL D. Shade: A fast instruction-set simulator for execution profiling[M]//Fast simulation of computer architectures. Springer, 1995: 5-46.</p><p>致谢</p><p><em class='similar'>三年的研究生生涯就要过去了,</em><em class='similar'>我要感谢我的导师汪增福教授给予的耐心指导和宝贵意见,</em>让我对论文的不足之处有了深入的理解,<em class='similar'>并最终完成了毕业论文的写作.</em></p><p><em class='similar'>路漫漫其修远兮,</em><em class='similar'>吾将上下而求索.</em></p></p>
                </div>
              </div>
             <div class="report_explain2">
              <div class="repExp_left">说明：</div>
              <div class="repExp_rig">
                <p>1.指标是由系统根据《学术论文不端行为的界定标准》自动生成的</p>
                <p>2.本报告单仅对您所选择比对资源范围内检测结果负责</p>
              </div>
            </div>
            <div class="clear"></div>
            <div class="report_footer">
                <div class="assist_tool">
                  <h2>写作辅助工具</h2>
                  <ul>
                    <li>
                      <div class="asst icons asst1"></div>
                      <div class="asstRig"> <a target="_blank" href="https://www.bigan.net/recommendtitle/">选题分析</a>
                        <p>帮您选择合适的论文题目</p>
                      </div>
                    </li>
                    <li>
                      <div class="asst icons asst2"></div>
                      <div class="asstRig"> <a target="_blank" href="https://www.bigan.net/recommenddata/">资料搜集</a>
                        <p>提供最全最好的参考文章</p>
                      </div>
                    </li>
                    <li>
                      <div class="asst icons asst3"></div>
                      <div class="asstRig"> <a target="_blank" href="https://www.bigan.net/recommendoutline/">提纲推荐</a>
                        <p>辅助生成文章大纲</p>
                      </div>
                    </li>
                    <li>
                      <div class="asst icons asst4"></div>
                      <div class="asstRig"> <a target="_blank" href="https://www.bigan.net/writing/">在线写作</a>
                        <p>规范写作，提供灵感</p>
                      </div>
                    </li>
                    <li class="bgNo">
                      <div class="asst icons asst5"></div>
                      <div class="asstRig"> <a target="_blank" href="https://www.bigan.net/reference/">参考文献</a>
                        <p>规范参考文献，查漏补缺</p>
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="repFot_bot">
                  <div class="reportCopy inlineBlock">版权所有：笔杆 www.bigan.net</div>
                  <div class="shareTo inlineBlock"><span>分享到：</span> <a href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https%3A%2F%2Fwww.bigan.net&title=%E5%92%8C%E6%88%91%E4%B8%80%E8%B5%B7%EF%BC%8C%E6%8B%BF%E8%B5%B7%E7%AC%94%E6%9D%86%EF%BC%8C%E5%81%9A%E4%B8%80%E4%B8%AA%E5%BF%AB%E4%B9%90%E7%9A%84%E5%AD%A6%E6%9C%AF%E5%B8%9D%E3%80%82&summary=%E7%AC%94%E6%9D%86%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%93%E4%B8%9A%E7%9A%84%E5%9C%A8%E7%BA%BF%E5%86%99%E4%BD%9C%E5%B9%B3%E5%8F%B0%E3%80%82%E7%AC%94%E6%9D%86%E4%B8%BA%E4%BD%A0%E6%89%AB%E6%B8%85%E5%86%99%E4%BD%9C%E6%80%9D%E8%B7%AF%E7%9A%84%E9%98%B4%E9%9C%BE%EF%BC%8C%E6%89%BE%E5%88%B0%E6%89%8D%E6%80%9D%E6%B3%89%E6%B6%8C%EF%BC%8C%E7%81%B5%E6%84%9F%E8%BF%B8%E5%8F%91%E7%9A%84%E5%BF%AB%E6%84%9F%EF%BC%8C%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%EF%BC%8C%E6%88%91%E4%BB%AC%E4%BF%A1%E6%89%8B%E6%8B%88%E6%9D%A5%E3%80%82www.bigan.net&pics=https%3A%2F%2Fwww.bigan.net%2Flogo_80_80.png" target="_blank" title="QQ空间" class="inlineBlock sitem1 icons pngfix"></a> <a href="#" title="微信" class="inlineBlock sitem2 icons pngfix"></a> <a href="http://service.weibo.com/share/share.php?url=https%3A%2F%2Fwww.bigan.net&title=%E5%92%8C%E6%88%91%E4%B8%80%E8%B5%B7%EF%BC%8C%E6%8B%BF%E8%B5%B7%E7%AC%94%E6%9D%86%EF%BC%8C%E5%81%9A%E4%B8%80%E4%B8%AA%E5%BF%AB%E4%B9%90%E7%9A%84%E5%AD%A6%E6%9C%AF%E5%B8%9D%E3%80%82%EF%BC%88%E7%AC%94%E6%9D%86%EF%BC%8C%E4%B8%80%E4%B8%AA%E4%B8%93%E4%B8%9A%E7%9A%84%E5%9C%A8%E7%BA%BF%E5%86%99%E4%BD%9C%E5%B9%B3%E5%8F%B0%E3%80%82%E7%AC%94%E6%9D%86%E4%B8%BA%E4%BD%A0%E6%89%AB%E6%B8%85%E5%86%99%E4%BD%9C%E6%80%9D%E8%B7%AF%E7%9A%84%E9%98%B4%E9%9C%BE%EF%BC%8C%E6%89%BE%E5%88%B0%E6%89%8D%E6%80%9D%E6%B3%89%E6%B6%8C%EF%BC%8C%E7%81%B5%E6%84%9F%E8%BF%B8%E5%8F%91%E7%9A%84%E5%BF%AB%E6%84%9F%EF%BC%8C%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C%EF%BC%8C%E6%88%91%E4%BB%AC%E4%BF%A1%E6%89%8B%E6%8B%88%E6%9D%A5%E3%80%82%40%E7%AC%94%E6%9D%86%E7%BD%91%EF%BC%89" target="_blank" title="新浪微博" class="inlineBlock sitem3 icons pngfix"></a> </div>
                </div>
              </div>
           </div>
       </div>
  </div>
</div>
</div>
</body>
</html>