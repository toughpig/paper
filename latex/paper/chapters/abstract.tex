% !TeX root = ../main.tex

\ustcsetup{
  keywords = {
    RISC-V, 模拟器, 指令集, 平台级中断控制器, 调试
  },
  keywords* = {
    RISC-V, Simulator, ISA, PLIC, Debug
  },
}

\begin{abstract}
  众所周知，芯片产业是投入极高、回报极慢的领域，而 RISC-V 提供了免费开源、开发周期较短的解决方案。面对国外芯片的生态和专利壁垒，RISC-V 有望成为我国自主研制处理器芯片的极好的选择。而在集成度越来越高的今天，面对数千万乃至上亿晶体管的规模，那种“设计硬件原型-实现-评估-改进-再实现”的模式已经无法满足现代设计应用的需求,因此在芯片开发项目中实现一款体系结构模拟器有着重要的现实意义.
  

  本文设计并实现了一款RISC-V指令集模拟器,能够完成对RISC-V架构处理器的功能模拟,包括指令集功能模拟，CPU和总线模拟,平台级中断控制器模拟等,并且提供了UI调试窗口,可以直接对RISC-V架构目标程序进行可视化的调试.本模拟器采用了基于解释型的指令集模拟策略,能够提供指令级别的仿真,并且采用了信号与槽机制进行对象间通信,能够以接近宿主机的速度进行跨平台程序开发和测试.该模拟器的主要功能是脱离硬件平台进行系统软件的移植开发工作,能够极大地缩短芯片开发后期的软件适配过程,另外也能够辅助进行处理器验证.


  测试表明,在本模拟器上的软件开发,测试,迭代周期,相较于在RISC-V硬件仿真平台上,缩短了90\%以上,并且还能够提供丰富的调试手段,极大地降低了调试难度. 本模拟器已在实际的芯片开发过程中承担了系统软件的前期移植工作,在流片之前完成了Linux内核的适配移植,并辅助进行了部分外设的驱动程序开发工作.
\end{abstract}

\begin{abstract*}
  As we all know, the chip industry is an area with extremely high investment and extremely slow returns, and RISC-V provides a solution that is free and open source, with a short development cycle. In the face of the ecological and patent barriers of foreign chips, RISC-V is expected to become an excellent choice for China's independent development of processor chips. In today's increasingly integrated, in the face of tens of millions or even hundreds of millions of transistors, the "design hardware prototype - implementation - evaluation - improvement - re-implementation" model can no longer meet the needs of modern design applications, so it is of great practical significance to implement an architecture simulator in chip development projects.


  This paper designs and implements a RISC-V instruction set simulator, which can complete the functional simulation of the RISC-V architecture processor, including instruction set function simulation, CPU and bus simulation, platform-level interrupt controller simulation, etc., and provides a UI debugging window, which can directly visualize the debugging of the RISC-V architecture target program. This simulator adopts an interpreted instruction set simulation strategy, which can provide instruction-level simulation, and adopts signal and slot mechanism for inter-object communication, which can develop and test cross-platform programs at a speed close to the host machine. The main function of the simulator is to carry out the porting and development of system software from the hardware platform, which can greatly shorten the software adaptation process in the later stage of chip development, and can also assist in processor verification.

  
  The test shows that the software development, testing, and iteration cycle on this simulator is more than 90\% shorter than that developed on the RISC-V hardware simulation platform, and it can also provide a wealth of debugging methods, which greatly reduces the debugging difficulty. This simulator has undertaken the pre-migration of the system software in the actual chip development process, completed the adaptation and porting of the Linux kernel before the tape-out, and assisted in the driver development of some peripherals.
\end{abstract*}
